<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Gabriel Donelly Higgins">
<meta name="dcterms.date" content="2025-03-30">
<title>9&nbsp; Exam 1 Summary â€“ COMP/STAT112 Notebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../summary/exam_2.html" rel="next">
<link href="../bw/solo_project.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script><link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script><script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.2.2/leaflet.js"></script><link rel="stylesheet" href="../style/custom.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../summary/exam_1.html">Summary</a></li><li class="breadcrumb-item"><a href="../summary/exam_1.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exam 1 Summary</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Gabriel Donelly Higgins</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Best Work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-tri.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Trivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-quad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Quadvariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/exam_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/exam_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exam 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/solo_project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Solo Project</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Summary</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../summary/exam_1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exam 1 Summary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../summary/exam_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exam 2 Summary</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">In-class Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Mulivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-effective.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Effective Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Joining</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-reshaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reshaping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Dates</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#the-max-number-of-variables-in-a-viz-is-7" id="toc-the-max-number-of-variables-in-a-viz-is-7" class="nav-link active" data-scroll-target="#the-max-number-of-variables-in-a-viz-is-7"><span class="header-section-number">9.1</span> The Max Number of Variables in a Viz is 7:</a></li>
  <li><a href="#effective-viz-checklist" id="toc-effective-viz-checklist" class="nav-link" data-scroll-target="#effective-viz-checklist"><span class="header-section-number">9.2</span> Effective Viz Checklist:</a></li>
  <li><a href="#steps-to-an-effective-viz" id="toc-steps-to-an-effective-viz" class="nav-link" data-scroll-target="#steps-to-an-effective-viz"><span class="header-section-number">9.3</span> Steps to an Effective Viz:</a></li>
  <li><a href="#data-in-spreadsheets-is-called-tidy-when" id="toc-data-in-spreadsheets-is-called-tidy-when" class="nav-link" data-scroll-target="#data-in-spreadsheets-is-called-tidy-when"><span class="header-section-number">9.4</span> Data in Spreadsheets is Called Tidy When:</a></li>
  <li><a href="#bivariate-multivariate-viz" id="toc-bivariate-multivariate-viz" class="nav-link" data-scroll-target="#bivariate-multivariate-viz"><span class="header-section-number">9.5</span> Bivariate / Multivariate Viz:</a></li>
  <li><a href="#spatial-viz" id="toc-spatial-viz" class="nav-link" data-scroll-target="#spatial-viz"><span class="header-section-number">9.6</span> Spatial Viz:</a></li>
  <li><a href="#the-3-types-of-spatial-viz" id="toc-the-3-types-of-spatial-viz" class="nav-link" data-scroll-target="#the-3-types-of-spatial-viz"><span class="header-section-number">9.7</span> The 3 Types of Spatial Viz:</a></li>
  <li><a href="#alt-text-and-titles" id="toc-alt-text-and-titles" class="nav-link" data-scroll-target="#alt-text-and-titles"><span class="header-section-number">9.8</span> Alt text and titles</a></li>
  <li><a href="#categorical-plots" id="toc-categorical-plots" class="nav-link" data-scroll-target="#categorical-plots"><span class="header-section-number">9.9</span> Categorical plots</a></li>
  <li><a href="#numerical-plots" id="toc-numerical-plots" class="nav-link" data-scroll-target="#numerical-plots"><span class="header-section-number">9.10</span> Numerical Plots:</a></li>
  <li><a href="#mixed-variable-plots" id="toc-mixed-variable-plots" class="nav-link" data-scroll-target="#mixed-variable-plots"><span class="header-section-number">9.11</span> Mixed Variable Plots:</a></li>
  <li><a href="#data-manipulation" id="toc-data-manipulation" class="nav-link" data-scroll-target="#data-manipulation"><span class="header-section-number">9.12</span> Data manipulation</a></li>
  <li><a href="#command-list" id="toc-command-list" class="nav-link" data-scroll-target="#command-list"><span class="header-section-number">9.13</span> Command List:</a></li>
  <li><a href="#logical-operators" id="toc-logical-operators" class="nav-link" data-scroll-target="#logical-operators"><span class="header-section-number">9.14</span> Logical Operators:</a></li>
  <li><a href="#selection-commands" id="toc-selection-commands" class="nav-link" data-scroll-target="#selection-commands"><span class="header-section-number">9.15</span> Selection Commands:</a></li>
  <li><a href="#date-commands" id="toc-date-commands" class="nav-link" data-scroll-target="#date-commands"><span class="header-section-number">9.16</span> Date Commands:</a></li>
  <li><a href="#reshaping" id="toc-reshaping" class="nav-link" data-scroll-target="#reshaping"><span class="header-section-number">9.17</span> Reshaping:</a></li>
  <li><a href="#joining" id="toc-joining" class="nav-link" data-scroll-target="#joining"><span class="header-section-number">9.18</span> Joining:</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../summary/exam_1.html">Summary</a></li><li class="breadcrumb-item"><a href="../summary/exam_1.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exam 1 Summary</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">
<span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exam 1 Summary</span>
</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriel Donelly Higgins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 30, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header><div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(maps)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(mosaic)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(gplots)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(rnaturalearth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="the-max-number-of-variables-in-a-viz-is-7" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="the-max-number-of-variables-in-a-viz-is-7">
<span class="header-section-number">9.1</span> The Max Number of Variables in a Viz is 7:</h2>
<ul>
<li>X-axis</li>
<li>Y-axis</li>
<li>Opacity</li>
<li>Color</li>
<li>Size</li>
<li>Shape</li>
<li>Facets</li>
<li>3 dimensions</li>
</ul></section><section id="effective-viz-checklist" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="effective-viz-checklist">
<span class="header-section-number">9.2</span> Effective Viz Checklist:</h2>
<ul>
<li><p>Is graph effective?</p></li>
<li><p>right for data</p></li>
<li><p>appropriate for story</p></li>
<li><p>clear purpose</p></li>
<li><p>appropriate audience</p></li>
<li><p>unbiased / inclusive</p></li>
<li><p>not misleading</p></li>
<li><p>Is graph complete?</p></li>
<li><p>title</p></li>
<li><p>subtitle</p></li>
<li><p>X-axis label</p></li>
<li><p>X-axis marks</p></li>
<li><p>Y-axis label</p></li>
<li><p>Y-axis marks</p></li>
<li><p>legend title</p></li>
<li><p>legend labels</p></li>
<li><p>capition (author, date, source)</p></li>
<li><p>data labels</p></li>
<li><p>date annotation</p></li>
<li><p>Is graph accessible</p></li>
<li><p>color (fill, border, background, text)</p></li>
<li><p>alt-text</p></li>
<li><p>text size</p></li>
</ul></section><section id="steps-to-an-effective-viz" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="steps-to-an-effective-viz">
<span class="header-section-number">9.3</span> Steps to an Effective Viz:</h2>
<ul>
<li>Identify simple research questions</li>
<li>what do you want to understand about the variables or the relationships among them?</li>
<li>Start with the basic and work incrementally</li>
<li>Identify what variables you want to include in your plot and what structure these have (e.g: categorical, quantitative, dates)</li>
<li>start simply, build a plot of just one of these variables, or the relationship between two of the variables</li>
<li>set up a plotting frame and add just one geometric layer at a time</li>
<li>start tweaking: add whatever new variables you want to examine</li>
<li>Ask your plot questions</li>
<li>what questions does your plot answer? What questions are left unanswered by your plot?</li>
<li>what new questions does your plot spark/inspire?</li>
<li>do you have the visualization tools to answer these questions, or might you learn more?</li>
<li>Focus</li>
<li>reporting a large number of visualizations can overwhelm the audience and obscure your conclusions. Instead, pick out a focused yet comprehensive set of visualizations.</li>
</ul></section><section id="data-in-spreadsheets-is-called-tidy-when" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="data-in-spreadsheets-is-called-tidy-when">
<span class="header-section-number">9.4</span> Data in Spreadsheets is Called Tidy When:</h2>
<ul>
<li>Each row = a unit of observation</li>
<li>Each column = a measure of some variable of interest:</li>
<li>quantitative = numbers with units</li>
<li>categorical = discrete possibilities or categories</li>
<li>Each entry contains a single data value, ie, no analysis, summaries, footnotes, comments, etc. Only one value per cell</li>
</ul></section><section id="bivariate-multivariate-viz" class="level2" data-number="9.5"><h2 data-number="9.5" class="anchored" data-anchor-id="bivariate-multivariate-viz">
<span class="header-section-number">9.5</span> Bivariate / Multivariate Viz:</h2>
<p>In bivariate viz there are two variables. One is an independent variable and one is a dependent variable. You are trying to explain the variability of one variable relative to the other.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>elections <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_county.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> repub_pct_16, <span class="at">y =</span> repub_pct_20)) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Percent of Republican Vote in 2016"</span>, <span class="at">title =</span> <span class="st">"Republican Vote by County in 2016 vs 2020"</span>, <span class="at">y =</span> <span class="st">"Percent of Republican Support in 2020"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>$x
[1] "Percent of Republican Vote in 2016"

$y
[1] "Percent of Republican Support in 2020"

$title
[1] "Republican Vote by County in 2016 vs 2020"

attr(,"class")
[1] "labels"</code></pre>
</div>
</div>
<p>In multivariate viz, you just use more variables to show the relationship between them.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/weather_3_locations.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))  </span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> temp3pm, <span class="at">x =</span> temp9am, <span class="at">color =</span> location)) <span class="sc">+</span> </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Temperature at 9 am"</span>, <span class="at">title =</span> <span class="st">"Weather observation in Australia"</span>,<span class="at">y =</span> <span class="st">"Temperature at 3 pm"</span>, <span class="at">color =</span> <span class="st">"Location"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="spatial-viz" class="level2" data-number="9.6"><h2 data-number="9.6" class="anchored" data-anchor-id="spatial-viz">
<span class="header-section-number">9.6</span> Spatial Viz:</h2>
<p>Create a map widget by calling leaflet( ) and telling it the data to use</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>fave_places <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://hash-mac.github.io/stat112site-s25/data/our_fave_places.csv"</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-e0afeddc82b11e52f2d1" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e0afeddc82b11e52f2d1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Add a base map using addTiles( ) or addProviderTiles( )</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places) <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">addTiles</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-7b6307444822e222f6f0" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7b6307444822e222f6f0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Add layers to the map using layer functions(addMarkers( ) or addPolygons( ))</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places) <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">addTiles</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> <span class="sc">~</span>longitude, <span class="at">lat =</span> <span class="sc">~</span>latitude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-a55acf41faf0ab620a95" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a55acf41faf0ab620a95">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[59,45,33,40,40,37,33,38,52,35,25,41,34,46,50,45,14,44,52,45,38,48,33,33,48,39,32,46,0,16,30,36,38,38,38,50,45,20],[18,-93,-117,116,106,-122,-106,24,5,-90,122,29,-118,-111,7,-93,101,-70,5,-90,122,-122,-117,-80,123,107,119,-85,0,68,-100,104,127,-123,-123,7,-124,-155],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[0,59],"lng":[-155,127]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Print the map widget to display it</p>
</section><section id="the-3-types-of-spatial-viz" class="level2" data-number="9.7"><h2 data-number="9.7" class="anchored" data-anchor-id="the-3-types-of-spatial-viz">
<span class="header-section-number">9.7</span> The 3 Types of Spatial Viz:</h2>
<p>Point map: Maps plotting individual observations</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>starbucks <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/starbucks.csv"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">ggplot</span>(starbucks, <span class="fu">aes</span>(<span class="at">y =</span> Latitude, <span class="at">x =</span> Longitude)) <span class="sc">+</span> </span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Contour maps: Maps plotting the density of the distribution of observations</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>starbucks_cma <span class="ot">&lt;-</span> starbucks_cma <span class="ot">&lt;-</span> starbucks <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'CA'</span>, <span class="st">'MX'</span>, <span class="st">'US'</span>))</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a>cma_boundaries <span class="ot">&lt;-</span> <span class="fu">ne_states</span>(</span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"canada"</span>, <span class="st">"mexico"</span>, <span class="st">"united states of america"</span>),</span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="fu">ggplot</span>(cma_boundaries) <span class="sc">+</span> </span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb10-10"><a href="#cb10-10"></a>  <span class="fu">geom_density_2d</span>(</span>
<span id="cb10-11"><a href="#cb10-11"></a>    <span class="at">data =</span> starbucks_cma,</span>
<span id="cb10-12"><a href="#cb10-12"></a>    <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude),</span>
<span id="cb10-13"><a href="#cb10-13"></a>    <span class="at">size =</span> <span class="fl">0.2</span>,</span>
<span id="cb10-14"><a href="#cb10-14"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>  ) <span class="sc">+</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">179.14</span>, <span class="sc">-</span><span class="dv">50</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">14.54</span>, <span class="fl">83.11</span>)) <span class="sc">+</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="fu">theme_map</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Choropleth maps: Maps plotting outcomes in different regions</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>elections_by_state <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_by_state.csv"</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a>elections_by_counties <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_county.csv"</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a>elections_by_state <span class="ot">&lt;-</span> elections_by_state <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">filter</span>(state_abbr <span class="sc">!=</span> <span class="st">"DC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">select</span>(state_name, state_abbr, repub_pct_20) <span class="sc">|&gt;</span> </span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">mutate</span>(<span class="at">repub_20_categories =</span> </span>
<span id="cb11-8"><a href="#cb11-8"></a>           <span class="fu">cut</span>(repub_pct_20, </span>
<span id="cb11-9"><a href="#cb11-9"></a>               <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">70</span>, <span class="at">by =</span> <span class="dv">5</span>), </span>
<span id="cb11-10"><a href="#cb11-10"></a>               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>, <span class="st">"45-49"</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>                          <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-70"</span>), </span>
<span id="cb11-12"><a href="#cb11-12"></a>               <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb11-13"><a href="#cb11-13"></a></span>
<span id="cb11-14"><a href="#cb11-14"></a>elections_by_counties <span class="ot">&lt;-</span> elections_by_counties <span class="sc">|&gt;</span> </span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">select</span>(state_name, state_abbr, county_name, county_fips,</span>
<span id="cb11-16"><a href="#cb11-16"></a>          repub_pct_20, median_age, median_rent) <span class="sc">|&gt;</span> </span>
<span id="cb11-17"><a href="#cb11-17"></a>  <span class="fu">mutate</span>(<span class="at">repub_20_categories =</span> </span>
<span id="cb11-18"><a href="#cb11-18"></a>           <span class="fu">cut</span>(repub_pct_20, </span>
<span id="cb11-19"><a href="#cb11-19"></a>               <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>),</span>
<span id="cb11-20"><a href="#cb11-20"></a>               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0-9"</span>, <span class="st">"10-19"</span>, <span class="st">"20-29"</span>, <span class="st">"30-39"</span>, <span class="st">"40-49"</span>,</span>
<span id="cb11-21"><a href="#cb11-21"></a>                          <span class="st">"50-59"</span>, <span class="st">"60-69"</span>, <span class="st">"70-79"</span>, <span class="st">"80-89"</span>, <span class="st">"90-100"</span>),</span>
<span id="cb11-22"><a href="#cb11-22"></a>               <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb11-23"><a href="#cb11-23"></a></span>
<span id="cb11-24"><a href="#cb11-24"></a>states_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb11-25"><a href="#cb11-25"></a></span>
<span id="cb11-26"><a href="#cb11-26"></a><span class="fu">ggplot</span>(elections_by_state, <span class="fu">aes</span>(<span class="at">map_id =</span> state_name, <span class="at">fill =</span> repub_pct_20)) <span class="sc">+</span></span>
<span id="cb11-27"><a href="#cb11-27"></a>  <span class="fu">geom_map</span>(<span class="at">map =</span> states_map) <span class="sc">+</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> states_map<span class="sc">$</span>long, <span class="at">y =</span> states_map<span class="sc">$</span>lat) <span class="sc">+</span></span>
<span id="cb11-29"><a href="#cb11-29"></a>  <span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb11-30"><a href="#cb11-30"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"% of Republican Support"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="alt-text-and-titles" class="level2" data-number="9.8"><h2 data-number="9.8" class="anchored" data-anchor-id="alt-text-and-titles">
<span class="header-section-number">9.8</span> Alt text and titles</h2>
<p>Alt text is a written description of the viz that can be read by a screen reader</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> temp3pm, <span class="at">fill =</span> location)) <span class="sc">+</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"3pm temperature (Celsius)"</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" alt="This is a density plot containing a numerical and a categorical variable. The numerical variable in the temperature at 3 pm in Celcius. The categorical variable is the location where the temperature was measured. The numerical variable, the temperature, is on the x-axis. The y-axis represents the density of observations. The density plot has created 3 different lumps, each color coded for the legend which matches them to their location. The Hobart lump rises from 0 degrees celcius to 12.5, where it plateus before falling again at 17.5 and becoming exponentially lower on the y-axis as it approaches 40 degrees celcius on the x-axis. The Uluru lump rises from 10 degrees celcius, and has a series of plataeus followed by elevations until it reaches 37.5 degrees where it begins its decline till it reaches 40 degrees celcius on the x-axis. The Wollongong lump rises rapidly at 12.5 degrees celcius, peaks at 20 degrees celcius, and then rapidly falls till 27.5 degrees celcius where it then has a slightly negative plateuatill 40 degrees celcius." width="672"></p>
</figure>
</div>
</div>
</div>
<p>The title is a 1-sentence description of a plot</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> temp3pm, <span class="at">fill =</span> location)) <span class="sc">+</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"3pm temperature (Celsius)"</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Density plots of 3pm temperatures in 3 Australian locations.</figcaption></figure>
</div>
</div>
</div>
</section><section id="categorical-plots" class="level2" data-number="9.9"><h2 data-number="9.9" class="anchored" data-anchor-id="categorical-plots">
<span class="header-section-number">9.9</span> Categorical plots</h2>
<p><strong>1 variable:</strong></p>
<p>Bar chart (just counts observations)</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>hikes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/high_peaks.csv"</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">ggplot</span>(hikes, <span class="fu">aes</span>(<span class="at">x =</span> rating)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>2 variables:</strong></p>
<p>Bar charts: - stacked (heights vary, but each color (stripe) of the bar follows the Y-axis)</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>dodge (side by side)</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>proportional (all same height)
<ul>
<li>this loses information about the number of observations</li>
</ul>
</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>3 variables:</strong></p>
<p>Facted wrapped bar charts: - facet wrapped stacked</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>facet wrapped dodge</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>facet wrapped proportional</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="numerical-plots" class="level2" data-number="9.10"><h2 data-number="9.10" class="anchored" data-anchor-id="numerical-plots">
<span class="header-section-number">9.10</span> Numerical Plots:</h2>
<p><strong>1 variable:</strong></p>
<p>Histogram</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Box plot</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Density plot</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>2 variables:</strong></p>
<p>Scatterplot</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Line plot</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>3 variables:</strong></p>
<p>Scatterplot - color</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">color =</span> windspeed9am)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>proportional symbols</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">size =</span> rainfall)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">name =</span> <span class="st">"rainfall"</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>opacity</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">alpha =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="mixed-variable-plots" class="level2" data-number="9.11"><h2 data-number="9.11" class="anchored" data-anchor-id="mixed-variable-plots">
<span class="header-section-number">9.11</span> Mixed Variable Plots:</h2>
<p><strong>1 numerical + 1 categorical:</strong></p>
<p>Density plots: - faceted</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>color</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed, <span class="at">fill =</span> location)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Box plot (faceted)</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Violin</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> windgustspeed, <span class="at">x =</span> location)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Histograms: - faceted</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>fill / color</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed, <span class="at">fill =</span> location)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>1 numerical + 2 categorical:</strong></p>
<p>Heat map</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>education <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/sat.csv"</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a></span>
<span id="cb35-3"><a href="#cb35-3"></a>plot_data <span class="ot">&lt;-</span> education <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="fu">column_to_rownames</span>(<span class="st">"State"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb35-5"><a href="#cb35-5"></a>  <span class="fu">data.matrix</span>() <span class="sc">|&gt;</span> </span>
<span id="cb35-6"><a href="#cb35-6"></a>  <span class="fu">scale</span>()</span>
<span id="cb35-7"><a href="#cb35-7"></a></span>
<span id="cb35-8"><a href="#cb35-8"></a><span class="fu">heatmap.2</span>(plot_data,</span>
<span id="cb35-9"><a href="#cb35-9"></a>  <span class="at">dendrogram =</span> <span class="st">"none"</span>,</span>
<span id="cb35-10"><a href="#cb35-10"></a>  <span class="at">Rowv =</span> <span class="cn">NA</span>, </span>
<span id="cb35-11"><a href="#cb35-11"></a>  <span class="at">scale =</span> <span class="st">"column"</span>,</span>
<span id="cb35-12"><a href="#cb35-12"></a>  <span class="at">keysize =</span> <span class="fl">0.7</span>, </span>
<span id="cb35-13"><a href="#cb35-13"></a>  <span class="at">density.info =</span> <span class="st">"none"</span>,</span>
<span id="cb35-14"><a href="#cb35-14"></a>  <span class="at">col =</span> <span class="fu">hcl.colors</span>(<span class="dv">256</span>), </span>
<span id="cb35-15"><a href="#cb35-15"></a>  <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>),</span>
<span id="cb35-16"><a href="#cb35-16"></a>  <span class="at">colsep =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>), <span class="at">rowsep =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>), <span class="at">sepwidth =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.05</span>),</span>
<span id="cb35-17"><a href="#cb35-17"></a>  <span class="at">sepcolor =</span> <span class="st">"white"</span>, <span class="at">trace =</span> <span class="st">"none"</span></span>
<span id="cb35-18"><a href="#cb35-18"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p><strong>2 numerical + 1 categorical:</strong></p>
<p>Scatterplots: - faceted</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>fill / coor</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp, <span class="at">color =</span> location)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>shape</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp, <span class="at">shape =</span> location)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>labeled points</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> windgustdir), <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="exam_1_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="data-manipulation" class="level2" data-number="9.12"><h2 data-number="9.12" class="anchored" data-anchor-id="data-manipulation">
<span class="header-section-number">9.12</span> Data manipulation</h2>
<p><strong>Piping:</strong> Use the |&gt; pipe operator. It makes the object on the left side pass to the function on the right to the get a new object.</p>
<p><strong>Types of reshaped data:</strong> - Aggregated data - Data that has had functions like group_by() or summarize() done to it. It gains aggregate information about the observations but loses data on individual observations - Raw data, reshaped - Data that is reshaped to maintain individual observations, but in a way that it can be properly manipulated</p>
<p><strong>Unit of observation:</strong> The level at which data is collected and analyzed, by individual cases or groups.</p>
<p>For example, in a dataset of students, each student is the unit of observation. In a dataset of cities, each city is the unit of observation. In a datset of daily weather data, each day is the unit of observation</p>
</section><section id="command-list" class="level2" data-number="9.13"><h2 data-number="9.13" class="anchored" data-anchor-id="command-list">
<span class="header-section-number">9.13</span> Command List:</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 80%">
</colgroup>
<thead><tr class="header">
<th>Verb</th>
<th>Outcome</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>arrange</code></td>
<td>Arrange the rows according to a variable</td>
</tr>
<tr class="even">
<td><code>filter</code></td>
<td>Filter out or obtain a subset of the rows</td>
</tr>
<tr class="odd">
<td><code>select</code></td>
<td>Select a subset of the columns</td>
</tr>
<tr class="even">
<td><code>mutate</code></td>
<td>Mutate or create a column</td>
</tr>
<tr class="odd">
<td><code>summarize</code></td>
<td>Calculate a numerical summary of a column</td>
</tr>
<tr class="even">
<td><code>group_by</code></td>
<td>Group the rows by a specified column</td>
</tr>
<tr class="odd">
<td><code>ungroup</code></td>
<td>Ungroups the previous <code>group_by</code>
</td>
</tr>
<tr class="even">
<td><code>count()</code></td>
<td>Counts the number of observations in a group or just the whole column</td>
</tr>
<tr class="odd">
<td><code>n()</code></td>
<td>Also counts the number of observations in a group, but must be used inside of <code>summarize</code> or <code>mutate</code>
</td>
</tr>
<tr class="even">
<td><code>na.rm</code></td>
<td>Makes it so that the expressions you use in your command do not have the <code>NA</code> value</td>
</tr>
<tr class="odd">
<td><code>as.factor</code></td>
<td>Use it in the <code>mutate</code> command to make a variable categorical</td>
</tr>
<tr class="even">
<td><code>as.numeric</code></td>
<td>Use it in the <code>mutate</code> command to make a variable numeric</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/utils/head.html">head()</a></code></td>
<td>Shows first rows of dataset</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/library.html">library(package)</a></code></td>
<td>Loads package into program</td>
</tr>
</tbody>
</table>
<p><strong>arrange:</strong></p>
<p>We have dataset weather</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">head</span>(weather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
<p>And we use arrange(maxtemp) on it to order observations from lowest to highest value in maxtemp</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">arrange</span>(maxtemp) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date location mintemp maxtemp rainfall evaporation sunshine windgustdir
1 2020-07-10   Hobart     2.1     8.6      0.0         0.4       NA         NNW
2 2020-06-18   Hobart     2.0     8.7      0.0         0.8       NA         NNW
3 2021-06-22   Hobart     2.7     8.7      0.0         0.6       NA         NNW
4 2021-07-25   Hobart     4.8     8.7      1.4         1.2       NA          NW
5 2020-07-11   Hobart     2.1     8.8      0.0         0.0       NA         NNW
6 2020-08-05   Hobart     2.6     8.8     46.2         1.2       NA           S
  windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm humidity9am
1            37        NNW          N           20           13          92
2            31        NNW        NNW           17           11          82
3            31        NNW        NNW           19           13          94
4            69        WNW          W           35           17          64
5            30        NNW        NNW           20           13          88
6            70        SSW        SSW           30           28          79
  humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am temp3pm
1          80      1026.0      1022.4        7        7     2.1     7.5
2          65      1035.2      1030.4        1        7     3.3     8.6
3          75      1030.2      1027.5        7        7     3.7     8.2
4          81       987.5       992.3        6        7     6.5     4.9
5          75      1018.4      1015.9        7        7     4.5     8.8
6          76      1012.0      1011.6        7        7     6.6     7.4
  raintoday risk_mm raintomorrow
1        No     0.0           No
2        No     0.0           No
3        No     0.0           No
4       Yes     2.8          Yes
5        No     0.8           No
6       Yes     2.6          Yes</code></pre>
</div>
</div>
<p>Or arrange(desc(maxtemp)) to order observations from highest to lowest value in maxtemp</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date location mintemp maxtemp rainfall evaporation sunshine windgustdir
1 2021-12-18    Uluru    25.6    45.4        0          NA       NA         NNE
2 2020-11-28    Uluru    23.0    45.2        0          NA       NA         SSW
3 2021-12-17    Uluru    23.0    44.0        0          NA       NA          NW
4 2022-01-11    Uluru    26.8    43.8        0          NA       NA         ESE
5 2020-02-13    Uluru    28.8    43.6        0          NA       NA         NNE
6 2020-02-14    Uluru    27.9    43.5        0          NA       NA         SSW
  windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm humidity9am
1            39        ESE         NW           17           22          20
2            54          S          N           15           17          18
3            50         NE        WNW           19           13          21
4            56         SE        ESE           20           20          26
5            52         NE          E           24            7          16
6            46        ESE          S           19           20          17
  humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am temp3pm
1           8      1005.7      1002.0       NA       NA    36.8    44.5
2           6      1005.4      1001.3       NA       NA    36.6    43.7
3          10      1006.4      1001.7        2        1    33.4    43.5
4           7      1011.7      1007.5       NA       NA    31.7    42.2
5          14      1006.8      1002.0       NA        2    34.8    42.2
6          13      1006.8      1002.8        2        2    34.7    41.3
  raintoday risk_mm raintomorrow
1        No       0           No
2        No       0           No
3        No       0           No
4        No       0           No
5        No       0           No
6        No       0           No</code></pre>
</div>
</div>
<p><strong>filter:</strong></p>
<p>We can use filter(maxtemp &lt; 45) to get observations with a maxtemp below 45</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">filter</span>(maxtemp <span class="sc">&lt;</span> <span class="dv">45</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
<p><strong>select:</strong></p>
<p>We can use select(maxtemp, mintemp, location) to only select those columns</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">select</span>(maxtemp, mintemp, location) <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  maxtemp mintemp   location
1    23.1    17.1 Wollongong
2    24.2    17.7 Wollongong
3    26.8    19.7 Wollongong
4    35.5    20.4 Wollongong
5    21.4    19.8 Wollongong
6    22.9    18.3 Wollongong</code></pre>
</div>
</div>
<p>Or we can use (-maxtemp) to select all columns except maxtemp</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>maxtemp) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp rainfall evaporation sunshine windgustdir
1 2020-01-01 Wollongong    17.1        0          NA       NA         SSW
2 2020-01-02 Wollongong    17.7        0          NA       NA         SSW
3 2020-01-03 Wollongong    19.7        0          NA       NA          NE
4 2020-01-04 Wollongong    20.4        0          NA       NA         SSW
5 2020-01-05 Wollongong    19.8        0          NA       NA         SSW
6 2020-01-06 Wollongong    18.3        0          NA       NA          NE
  windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm humidity9am
1            39        SSW        SSE           20           15          69
2            37          S        ENE           13           15          72
3            41        NNW        NNE            7           17          72
4            78         NE        NNE           15           17          77
5            57        SSW          S           31           35          70
6            35        ESE         NE           17           20          71
  humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am temp3pm
1          64      1014.9      1014.0        8        1    19.1    22.9
2          54      1020.1      1017.7        7        1    19.8    23.6
3          71      1017.5      1013.0        6       NA    23.4    25.7
4          69      1008.8      1003.9       NA       NA    24.5    26.7
5          75      1018.9      1019.9       NA        7    20.7    20.0
6          71      1021.2      1018.2       NA       NA    20.9    22.6
  raintoday risk_mm raintomorrow
1        No     0.0           No
2        No     0.0           No
3        No     0.0           No
4        No     0.0           No
5        No     0.0           No
6        No     0.8           No</code></pre>
</div>
</div>
<p><strong>mutate:</strong></p>
<p>We can use mutate(double_maxtemp = maxtemp * 2) to create a new column</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">mutate</span>(<span class="at">double_maxtemp =</span> maxtemp <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">select</span>(maxtemp, mintemp) <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  maxtemp mintemp
1    23.1    17.1
2    24.2    17.7
3    26.8    19.7
4    35.5    20.4
5    21.4    19.8
6    22.9    18.3</code></pre>
</div>
</div>
<p><strong>summarize:</strong></p>
<p>We can use summarize(mean_mintemp = mean(mintemp)) to summarize the mintemp column as a mean</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="fu">summarize</span>(<span class="at">mean_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  mean_mintemp
1     13.26417</code></pre>
</div>
</div>
<p><strong>group_by:</strong></p>
<p>We can use group_by(location) to make the unit of observation location, and then use a function like summarize(avg_mintemp = mean(mintemp))</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="fu">group_by</span>(location) <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">summarize</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 Ã— 2
  location   avg_mintemp
  &lt;chr&gt;            &lt;dbl&gt;
1 Hobart            9.47
2 Uluru            15.3 
3 Wollongong       15.1 </code></pre>
</div>
</div>
<p><strong>ungroup:</strong></p>
<p>You can reverse the unit of observation you select in group_by by using ungroup by, but only if you didnâ€™t use summarize. In this example, we use group_by(location), then mutate(avg_mintemp = mean(mintemp)), then ungroup()</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">group_by</span>(location) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">mutate</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb58-5"><a href="#cb58-5"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 Ã— 25
  date       location  mintemp maxtemp rainfall evaporation sunshine windgustdir
  &lt;date&gt;     &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      
1 2020-01-01 Wollongoâ€¦    17.1    23.1        0          NA       NA SSW        
2 2020-01-02 Wollongoâ€¦    17.7    24.2        0          NA       NA SSW        
3 2020-01-03 Wollongoâ€¦    19.7    26.8        0          NA       NA NE         
4 2020-01-04 Wollongoâ€¦    20.4    35.5        0          NA       NA SSW        
5 2020-01-05 Wollongoâ€¦    19.8    21.4        0          NA       NA SSW        
6 2020-01-06 Wollongoâ€¦    18.3    22.9        0          NA       NA NE         
# â„¹ 17 more variables: windgustspeed &lt;int&gt;, winddir9am &lt;chr&gt;, winddir3pm &lt;chr&gt;,
#   windspeed9am &lt;int&gt;, windspeed3pm &lt;int&gt;, humidity9am &lt;int&gt;,
#   humidity3pm &lt;int&gt;, pressure9am &lt;dbl&gt;, pressure3pm &lt;dbl&gt;, cloud9am &lt;int&gt;,
#   cloud3pm &lt;int&gt;, temp9am &lt;dbl&gt;, temp3pm &lt;dbl&gt;, raintoday &lt;chr&gt;,
#   risk_mm &lt;dbl&gt;, raintomorrow &lt;chr&gt;, avg_mintemp &lt;dbl&gt;</code></pre>
</div>
</div>
<p><strong>count:</strong></p>
<p>We have dataset hikes</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="fu">head</span>(hikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>             peak elevation difficulty ascent length time    rating
1     Mt. Marcy        5344          5   3166   14.8 10.0  moderate
2 Algonquin Peak       5114          5   2936    9.6  9.0  moderate
3   Mt. Haystack       4960          7   3570   17.8 12.0 difficult
4   Mt. Skylight       4926          7   4265   17.9 15.0 difficult
5 Whiteface Mtn.       4867          4   2535   10.4  8.5      easy
6       Dix Mtn.       4857          5   2800   13.2 10.0  moderate</code></pre>
</div>
</div>
<p>We can use count(rating) to count the number of observations in the location column for each value</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="fu">count</span>(rating) <span class="sc">|&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     rating  n
1 difficult  8
2      easy 11
3  moderate 27</code></pre>
</div>
</div>
<p>We can also use count() to count the total observations in the dataset</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>   n
1 46</code></pre>
</div>
</div>
<p><strong>n:</strong></p>
<p>We can use n() in a summarize function to count the number of observations in a group, similar to count</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>hikes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/high_peaks.csv"</span>)</span>
<span id="cb66-2"><a href="#cb66-2"></a></span>
<span id="cb66-3"><a href="#cb66-3"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb66-4"><a href="#cb66-4"></a>  <span class="fu">group_by</span>(rating) <span class="sc">|&gt;</span></span>
<span id="cb66-5"><a href="#cb66-5"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rating)) <span class="sc">|&gt;</span></span>
<span id="cb66-6"><a href="#cb66-6"></a>  <span class="fu">summarize</span>(<span class="at">total_trails =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 Ã— 2
  rating    total_trails
  &lt;chr&gt;            &lt;int&gt;
1 difficult            8
2 easy                11
3 moderate            27</code></pre>
</div>
</div>
<p><strong>na.rm:</strong></p>
<p>We can use na.rm = TRUE in a summarize function to remove all NA values in a column</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2"></a>  <span class="fu">summarize</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  avg_mintemp
1    13.26417</code></pre>
</div>
</div>
<p><strong>as.factor:</strong></p>
<p>We can use as.factor(windgustdir) in a mutate function to make it a factor</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>  <span class="fu">mutate</span>(<span class="at">windgustdir =</span> <span class="fu">as.factor</span>(windgustdir)) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
<p><strong>as.numeric:</strong></p>
<p>We can use as.numeric(mintemp) in a mutate function to make mintemp a number (even though it was already a number)</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="fu">mutate</span>(<span class="at">mintemp =</span> <span class="fu">as.numeric</span>(mintemp)) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
<p><strong>head():</strong></p>
<p>We can use head(weather) to check out the first few rows of the weather dataset</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a><span class="fu">head</span>(weather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
<p><strong>library():</strong></p>
<p>When you want to use a package that has been downloaded, use download(the packageâ€™s name). For example:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="logical-operators" class="level2" data-number="9.14"><h2 data-number="9.14" class="anchored" data-anchor-id="logical-operators">
<span class="header-section-number">9.14</span> Logical Operators:</h2>
<table class="caption-top table">
<thead><tr class="header">
<th>Operator</th>
<th>Meaning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>Equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>Not equal to</td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td>Greater than</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>Greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>&lt;</code></td>
<td>Less than</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>Less than or equal to</td>
</tr>
<tr class="odd">
<td><code>%in% c(var1, var2)</code></td>
<td>Is equal to var1, var2, etc.</td>
</tr>
</tbody>
</table>
<p>We can use logical operators to do various things. For example, in data manipulation, you can use it with a filter function like this:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>  <span class="fu">filter</span>(mintemp <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1        0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2        0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8        0          NA       NA
4 2020-01-04 Wollongong    20.4    35.5        0          NA       NA
5 2020-01-05 Wollongong    19.8    21.4        0          NA       NA
6 2020-01-06 Wollongong    18.3    22.9        0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          69      1008.8      1003.9       NA       NA    24.5
5          70          75      1018.9      1019.9       NA        7    20.7
6          71          71      1021.2      1018.2       NA       NA    20.9
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    26.7        No     0.0           No
5    20.0        No     0.0           No
6    22.6        No     0.8           No</code></pre>
</div>
</div>
</section><section id="selection-commands" class="level2" data-number="9.15"><h2 data-number="9.15" class="anchored" data-anchor-id="selection-commands">
<span class="header-section-number">9.15</span> Selection Commands:</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead><tr class="header">
<th>Verb</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>starts_with("string")</code></td>
<td>Selects columns that start with the given string</td>
</tr>
<tr class="even">
<td><code>ends_with("string")</code></td>
<td>Selects columns that end with the given string</td>
</tr>
<tr class="odd">
<td><code>contains("string")</code></td>
<td>Selects columns that contain the given string</td>
</tr>
<tr class="even">
<td><code>names(dataset1)</code></td>
<td>Returns the names of all columns in the dataset</td>
</tr>
<tr class="odd">
<td><code>is.na</code></td>
<td>Selects values that are <code>NA</code>
</td>
</tr>
<tr class="even">
<td><code>!is.na</code></td>
<td>Selects values that are <strong>not</strong> <code>NA</code>
</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/stats/na.fail.html">na.omit()</a></code></td>
<td>Removes rows with any <code>NA</code> values from the dataset</td>
</tr>
</tbody>
</table>
<p><strong>starts_with():</strong></p>
<p>We can use starts_with(â€œwindâ€) in a select function to select columns that start with wind</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"wind"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4         SSW            78         NE        NNE           15           17
5         SSW            57        SSW          S           31           35
6          NE            35        ESE         NE           17           20</code></pre>
</div>
</div>
<p><strong>ends_with():</strong></p>
<p>We can use ends_with(â€œpmâ€) in a select function to select columns of measurements taken in the second half of the day</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"pm"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  winddir3pm windspeed3pm humidity3pm pressure3pm cloud3pm temp3pm
1        SSE           15          64      1014.0        1    22.9
2        ENE           15          54      1017.7        1    23.6
3        NNE           17          71      1013.0       NA    25.7
4        NNE           17          69      1003.9       NA    26.7
5          S           35          75      1019.9        7    20.0
6         NE           20          71      1018.2       NA    22.6</code></pre>
</div>
</div>
<p><strong>contains():</strong></p>
<p>We can use contains(â€œ3â€) in a select function to select columns with measurements at 3 pm or am</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"3"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  winddir3pm windspeed3pm humidity3pm pressure3pm cloud3pm temp3pm
1        SSE           15          64      1014.0        1    22.9
2        ENE           15          54      1017.7        1    23.6
3        NNE           17          71      1013.0       NA    25.7
4        NNE           17          69      1003.9       NA    26.7
5          S           35          75      1019.9        7    20.0
6         NE           20          71      1018.2       NA    22.6</code></pre>
</div>
</div>
<p><strong>name:</strong></p>
<p>We can use names(weather) to get the names of each column in the weather dataset</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">names</span>(weather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> [1] "date"          "location"      "mintemp"       "maxtemp"      
 [5] "rainfall"      "evaporation"   "sunshine"      "windgustdir"  
 [9] "windgustspeed" "winddir9am"    "winddir3pm"    "windspeed9am" 
[13] "windspeed3pm"  "humidity9am"   "humidity3pm"   "pressure9am"  
[17] "pressure3pm"   "cloud9am"      "cloud3pm"      "temp9am"      
[21] "temp3pm"       "raintoday"     "risk_mm"       "raintomorrow" </code></pre>
</div>
</div>
<p><strong>is.na():</strong></p>
<p>We can use is.na(cloud9am) in a filter function to select observations which have NA values in the clouds9am column</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(cloud9am)) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-04 Wollongong    20.4    35.5      0.0          NA       NA
2 2020-01-05 Wollongong    19.8    21.4      0.0          NA       NA
3 2020-01-06 Wollongong    18.3    22.9      0.0          NA       NA
4 2020-01-07 Wollongong    19.9    25.6      0.8          NA       NA
5 2020-01-09 Wollongong    19.8    23.1      0.0          NA       NA
6 2020-01-10 Wollongong    20.5    25.4      0.0          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            78         NE        NNE           15           17
2         SSW            57        SSW          S           31           35
3          NE            35        ESE         NE           17           20
4           S            44        NNW          E           30            7
5           S            39        SSW          S           24           26
6          NE            56          N         NE           19           39
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          77          69      1008.8      1003.9       NA       NA    24.5
2          70          75      1018.9      1019.9       NA        7    20.7
3          71          71      1021.2      1018.2       NA       NA    20.9
4          76          72      1015.4      1012.0       NA       NA    22.9
5          76          79      1018.4      1016.9       NA       NA    21.2
6          79          76      1013.0      1006.1       NA       NA    23.0
  temp3pm raintoday risk_mm raintomorrow
1    26.7        No     0.0           No
2    20.0        No     0.0           No
3    22.6        No     0.8           No
4    24.9        No     1.6          Yes
5    22.2        No     0.0           No
6    25.1        No     1.0           No</code></pre>
</div>
</div>
<p><strong>!is.na():</strong></p>
<p>We can use !is.na(cloud9am) in a filter function to select observations which donâ€™t have NA values in the clouds9am column</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cloud9am)) <span class="sc">|&gt;</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-01-01 Wollongong    17.1    23.1      0.0          NA       NA
2 2020-01-02 Wollongong    17.7    24.2      0.0          NA       NA
3 2020-01-03 Wollongong    19.7    26.8      0.0          NA       NA
4 2020-01-08 Wollongong    20.1    23.2      1.6          NA       NA
5 2020-01-18 Wollongong    17.0    22.4      9.6          NA       NA
6 2020-01-19 Wollongong    18.3    22.8      2.8          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1         SSW            39        SSW        SSE           20           15
2         SSW            37          S        ENE           13           15
3          NE            41        NNW        NNE            7           17
4           S            41          S          S           31           33
5         SSW            57        SSW        SSW           41           31
6           S            19        SSW        SSW            6           15
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          69          64      1014.9      1014.0        8        1    19.1
2          72          54      1020.1      1017.7        7        1    19.8
3          72          71      1017.5      1013.0        6       NA    23.4
4          77          76      1016.2      1015.2        8       NA    21.3
5          86          71      1010.6      1009.6        8        7    19.6
6          87          87      1009.0      1006.8        8        8    20.1
  temp3pm raintoday risk_mm raintomorrow
1    22.9        No     0.0           No
2    23.6        No     0.0           No
3    25.7        No     0.0           No
4    22.2       Yes     0.0           No
5    21.6       Yes     2.8          Yes
6    20.9       Yes     1.0           No</code></pre>
</div>
</div>
<p><strong>na.omit():</strong></p>
<p>We can use na.omit(weather) to remove all observations with NA values</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a><span class="fu">na.omit</span>(weather) <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>          date location mintemp maxtemp rainfall evaporation sunshine
790 2020-01-01   Hobart    11.9    23.3        0         7.8     10.4
791 2020-01-02   Hobart    15.7    25.9        0         9.6     10.4
792 2020-01-03   Hobart    14.8    20.7        0         7.0      7.1
793 2020-01-04   Hobart    15.8    28.1        0         6.8      3.5
794 2020-01-05   Hobart    11.6    22.9        0         6.4      9.7
795 2020-01-06   Hobart     9.6    20.9        0         6.8     11.2
    windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
790         NNW            52         NW        NNW           26           28
791          NW            50        NNW         SE           22           30
792         SSE            30        ESE        ESE            9           17
793           W            80        NNW        WSW           20           24
794         WNW            52        NNW          E           22           15
795         SSW            37          E        SSE            9           20
    humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
790          41          36      1010.8      1009.3        3        7    17.4
791          43          60      1015.1      1015.0        6        6    19.0
792          64          59      1016.6      1011.8        7        7    16.2
793          49          28      1001.6      1005.3        6        6    19.9
794          48          27      1020.7      1019.6        7        3    14.2
795          54          53      1022.9      1019.7        3        1    15.3
    temp3pm raintoday risk_mm raintomorrow
790    22.1        No       0           No
791    19.0        No       0           No
792    19.7        No       0           No
793    20.6        No       0           No
794    21.9        No       0           No
795    20.8        No       0           No</code></pre>
</div>
</div>
</section><section id="date-commands" class="level2" data-number="9.16"><h2 data-number="9.16" class="anchored" data-anchor-id="date-commands">
<span class="header-section-number">9.16</span> Date Commands:</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 35%">
<col style="width: 64%">
</colgroup>
<thead><tr class="header">
<th>Input</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>as.Date(today())</code></td>
<td>Returns todayâ€™s date</td>
</tr>
<tr class="even">
<td><code>year(date)</code></td>
<td>Returns the year from the date</td>
</tr>
<tr class="odd">
<td><code>month(date)</code></td>
<td>Returns the month (1â€“12) from the date</td>
</tr>
<tr class="even">
<td><code>month(date, label = TRUE)</code></td>
<td>Returns the month as Jan, Feb, Mar, etc.</td>
</tr>
<tr class="odd">
<td><code>week(date)</code></td>
<td>Returns the week of the year from the date</td>
</tr>
<tr class="even">
<td><code>mday(date)</code></td>
<td>Returns the day of the month from the date</td>
</tr>
<tr class="odd">
<td><code>yday(date)</code></td>
<td>Returns the day of the year from the date</td>
</tr>
<tr class="even">
<td><code>wday(date)</code></td>
<td>Returns the day of the week (1 = Sunday by default)</td>
</tr>
<tr class="odd">
<td><code>wday(date, label = TRUE)</code></td>
<td>Returns the day of the week as text (e.g.&nbsp;Mon, Tue)</td>
</tr>
</tbody>
</table>
<p>When you type date1 &gt; date2, you are typing a boolean expression that claims that date 1 occurred after date 2. Same goes for &gt;= and &lt;=</p>
<p>When filtering by dates, use â€œâ€ marks, or it wonâ€™t identify the numbers as a date, for example:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="st">"2020-05-12"</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        date   location mintemp maxtemp rainfall evaporation sunshine
1 2020-05-13 Wollongong    12.0    19.4      0.0          NA       NA
2 2020-05-14 Wollongong    11.7    17.1      0.0          NA       NA
3 2020-05-15 Wollongong    11.9    17.7      0.0          NA       NA
4 2020-05-16 Wollongong    11.9    18.0      9.0          NA       NA
5 2020-05-17 Wollongong    11.5    18.3      1.0          NA       NA
6 2020-05-18 Wollongong    12.1    19.0     17.2          NA       NA
  windgustdir windgustspeed winddir9am winddir3pm windspeed9am windspeed3pm
1          NW            24        SSW        ESE            9            9
2         SSW            46         SW          S           26           35
3           S            50         SW        SSW           22           33
4         WSW            24         SW        SSE           11            9
5           W            24         SW        WSW           13            7
6           S            28        SSW        ENE            7           15
  humidity9am humidity3pm pressure9am pressure3pm cloud9am cloud3pm temp9am
1          46          47      1023.1      1021.5        4        6    15.8
2          67          61      1028.1      1027.2        3        8    14.8
3          58          70      1030.6      1029.0       NA        7    15.2
4          88          71      1032.1      1029.7        8        8    14.4
5          77          86      1031.7      1030.3       NA        8    16.7
6          85          74      1033.7      1030.9        8        8    16.6
  temp3pm raintoday risk_mm raintomorrow
1    17.8        No     0.0           No
2    15.9        No     0.0           No
3    15.5        No     9.0          Yes
4    17.5       Yes     1.0           No
5    15.9        No    17.2          Yes
6    17.4       Yes     0.0           No</code></pre>
</div>
</div>
</section><section id="reshaping" class="level2" data-number="9.17"><h2 data-number="9.17" class="anchored" data-anchor-id="reshaping">
<span class="header-section-number">9.17</span> Reshaping:</h2>
<p>You can condense information (pivot longer) to combine information from multiple columns into one. You can also spread information from one column into multiple columns (pivot wider).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 41%">
<col style="width: 58%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Result</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>pivot_wider(names_from = variable1, values_from = variable2)</code></td>
<td>Creates a new column for each unique value in <code>variable1</code>; fills each with values from <code>variable2</code>.</td>
</tr>
<tr class="even">
<td><code>pivot_longer(cols = c(variable1, variable2, variable3), names_to = "variable4", values_to = "variable5")</code></td>
<td>Converts multiple columns into two: <code>variable4</code> stores the original column names, <code>variable5</code> holds their values.</td>
</tr>
<tr class="odd">
<td><code>pivot_longer(cols = -c(variable1, variable2, variable3), names_to = "variable4", values_to = "variable5")</code></td>
<td>Same as above, but pivots <strong>all columns except</strong> <code>variable1</code>, <code>variable2</code>, and <code>variable3</code>.</td>
</tr>
</tbody>
</table>
<p>To add a prefix to the name of every new column, use â€œnames_prefix = â€˜prefix1â€™â€ for pivot_wider at the end of the command. To remove the prefix of the column names in pivot wider, use â€œnames_prefix = â€˜prefix2â€™â€. Use it in between names_to and values_to, and it will remove the text (from left to right) in the columns that are combining.</p>
<p><strong>pivot_wider():</strong></p>
<p>We can use the pivot_wider() function to create columns for each row, and assign the value of the average maxtemp for each location depending on if it rained or not</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="#cb95-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(raintoday)) <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href="#cb95-4"></a>  <span class="fu">group_by</span>(raintoday, location) <span class="sc">|&gt;</span></span>
<span id="cb95-5"><a href="#cb95-5"></a>  <span class="fu">summarize</span>(<span class="at">mean_maxtemp =</span> <span class="fu">mean</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb95-6"><a href="#cb95-6"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> location, <span class="at">values_from =</span> mean_maxtemp, <span class="at">names_prefix =</span> <span class="st">"avg_maxtemp_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 Ã— 4
# Groups:   raintoday [2]
  raintoday avg_maxtemp_Hobart avg_maxtemp_Uluru avg_maxtemp_Wollongong
  &lt;chr&gt;                  &lt;dbl&gt;             &lt;dbl&gt;                  &lt;dbl&gt;
1 No                      18.7              31.2                   22.0
2 Yes                     15.7              28.1                   21.2</code></pre>
</div>
</div>
<p><strong>pivot_longer:</strong></p>
<p>We can use pivot_longer() to create a column for if the temperature measured in the min or max temp that day, and another column for the value of the mintemp or maxtemp</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="#cb97-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(mintemp, maxtemp), <span class="at">names_to =</span> <span class="st">"temp"</span>, <span class="at">values_to =</span> <span class="st">"temperature"</span>) <span class="sc">|&gt;</span></span>
<span id="cb97-3"><a href="#cb97-3"></a>  <span class="fu">select</span>(date, location, temp, temperature) <span class="sc">|&gt;</span></span>
<span id="cb97-4"><a href="#cb97-4"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 Ã— 4
  date       location   temp    temperature
  &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt;
1 2020-01-01 Wollongong mintemp        17.1
2 2020-01-01 Wollongong maxtemp        23.1
3 2020-01-02 Wollongong mintemp        17.7
4 2020-01-02 Wollongong maxtemp        24.2
5 2020-01-03 Wollongong mintemp        19.7
6 2020-01-03 Wollongong maxtemp        26.8</code></pre>
</div>
</div>
</section><section id="joining" class="level2" data-number="9.18"><h2 data-number="9.18" class="anchored" data-anchor-id="joining">
<span class="header-section-number">9.18</span> Joining:</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Result</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>dataset1 |&gt; left_join(dataset2)</code></td>
<td>Adds matching data from <code>dataset2</code> to <code>dataset1</code>; keeps all rows from <code>dataset1</code>.</td>
</tr>
<tr class="even">
<td><code>dataset1 |&gt; right_join(dataset2)</code></td>
<td>Adds matching data from <code>dataset1</code> to <code>dataset2</code>; keeps all rows from <code>dataset2</code>.</td>
</tr>
<tr class="odd">
<td><code>dataset1 |&gt; inner_join(dataset2)</code></td>
<td>Keeps only rows with matches in <strong>both</strong> datasets; removes rows with no match (no <code>NA</code>s).</td>
</tr>
<tr class="even">
<td><code>dataset1 |&gt; full_join(dataset2)</code></td>
<td>Combines all rows from both datasets; fills with <code>NA</code> where there are no matches.</td>
</tr>
<tr class="odd">
<td><code>dataset1 |&gt; anti_join(dataset2)</code></td>
<td>Keeps rows from <code>dataset1</code> <strong>that do not match</strong> anything in <code>dataset2</code>.</td>
</tr>
<tr class="even">
<td><code>dataset1 |&gt; semi_join(dataset2)</code></td>
<td>Keeps rows from <code>dataset1</code> <strong>that have a match</strong> in <code>dataset2</code>, but includes <strong>only</strong> columns from <code>dataset1</code>.</td>
</tr>
</tbody>
</table>
<p>Inside the join functions, you should specify join_by(commonon_column == common_column) to make sure the right observations are matched together</p>
<p><strong>left_join:</strong></p>
<p>We can insert how many students are enrolled in each class by inserting information from the courses_combined dataset into the grades dataset by using left_join()</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/grades.csv"</span>)</span>
<span id="cb99-2"><a href="#cb99-2"></a></span>
<span id="cb99-3"><a href="#cb99-3"></a>courses <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/courses.csv"</span>)</span>
<span id="cb99-4"><a href="#cb99-4"></a></span>
<span id="cb99-5"><a href="#cb99-5"></a>courses_combined <span class="ot">&lt;-</span> courses <span class="sc">|&gt;</span></span>
<span id="cb99-6"><a href="#cb99-6"></a>  <span class="fu">group_by</span>(sessionID) <span class="sc">|&gt;</span></span>
<span id="cb99-7"><a href="#cb99-7"></a>  <span class="fu">summarise</span>(<span class="at">enroll =</span> <span class="fu">sum</span>(enroll))</span>
<span id="cb99-8"><a href="#cb99-8"></a></span>
<span id="cb99-9"><a href="#cb99-9"></a>grades <span class="sc">|&gt;</span></span>
<span id="cb99-10"><a href="#cb99-10"></a>  <span class="fu">left_join</span>(courses_combined, <span class="fu">join_by</span>(sessionID <span class="sc">==</span> sessionID)) <span class="sc">|&gt;</span></span>
<span id="cb99-11"><a href="#cb99-11"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     sid grade   sessionID enroll
1 S31185    D+ session1784     22
2 S31185    B+ session1785     52
3 S31185    A- session1791     22
4 S31185    B+ session1792     20
5 S31185    B- session1794     22
6 S31185    C+ session1795     26</code></pre>
</div>
</div>
<p><strong>right_join:</strong></p>
<p>We can also add information about grades and student identification number to courses_combined by using right_join(). New observations(rows) will be created in courses_combined to accomodate the larger number of observations in grades</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a>grades <span class="sc">|&gt;</span></span>
<span id="cb101-2"><a href="#cb101-2"></a>  <span class="fu">right_join</span>(courses_combined, <span class="fu">join_by</span>(sessionID <span class="sc">==</span> sessionID)) <span class="sc">|&gt;</span></span>
<span id="cb101-3"><a href="#cb101-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     sid grade   sessionID enroll
1 S31185    D+ session1784     22
2 S31185    B+ session1785     52
3 S31185    A- session1791     22
4 S31185    B+ session1792     20
5 S31185    B- session1794     22
6 S31185    C+ session1795     26</code></pre>
</div>
</div>
<p><strong>full_join():</strong></p>
<p>We can use full_join() between the voters and contact datasets to combine as much information as we can about each observation. However, there will be NA values, meaning that some observations will be missing information for certain columns</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>voters <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb103-2"><a href="#cb103-2"></a>  <span class="at">id =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"F"</span>, <span class="st">"G"</span>),</span>
<span id="cb103-3"><a href="#cb103-3"></a>  <span class="at">times_voted =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">17</span>, <span class="dv">6</span>, <span class="dv">20</span>)</span>
<span id="cb103-4"><a href="#cb103-4"></a>)</span>
<span id="cb103-5"><a href="#cb103-5"></a>  </span>
<span id="cb103-6"><a href="#cb103-6"></a>contact <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb103-7"><a href="#cb103-7"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>),</span>
<span id="cb103-8"><a href="#cb103-8"></a>  <span class="at">address =</span> <span class="fu">c</span>(<span class="st">"summit"</span>, <span class="st">"grand"</span>, <span class="st">"snelling"</span>, <span class="st">"fairview"</span>),</span>
<span id="cb103-9"><a href="#cb103-9"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">89</span>, <span class="dv">43</span>, <span class="dv">38</span>)</span>
<span id="cb103-10"><a href="#cb103-10"></a>)</span>
<span id="cb103-11"><a href="#cb103-11"></a></span>
<span id="cb103-12"><a href="#cb103-12"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb103-13"><a href="#cb103-13"></a>  <span class="fu">full_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  id times_voted  address age
1  A           2   summit  24
2  D           4 fairview  38
3  E          17     &lt;NA&gt;  NA
4  F           6     &lt;NA&gt;  NA
5  G          20     &lt;NA&gt;  NA
6  B          NA    grand  89
7  C          NA snelling  43</code></pre>
</div>
</div>
<p><strong>inner_join():</strong></p>
<p>We can use inner_join() between the voters and contact datasets to combine only observations where the combined information will fill all fields, so that no NA values will be created</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb105-2"><a href="#cb105-2"></a>  <span class="fu">inner_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  id times_voted  address age
1  A           2   summit  24
2  D           4 fairview  38</code></pre>
</div>
</div>
<p><strong>anti_join():</strong></p>
<p>We can use anti_join() to exclude all observations in voters that have a match in contact with no NA values</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb107-2"><a href="#cb107-2"></a>  <span class="fu">anti_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  id times_voted
1  E          17
2  F           6
3  G          20</code></pre>
</div>
</div>
<p><strong>semi_join:</strong></p>
<p>We can use inner_join() between the voters and contact datasets to only show observations in voters where the match in contact has no NA values. This will also not add information to the dataset from contact.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb109-2"><a href="#cb109-2"></a>  <span class="fu">semi_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  id times_voted
1  A           2
2  D           4</code></pre>
</div>
</div>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../bw/solo_project.html" class="pagination-link" aria-label="Solo Project">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Solo Project</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../summary/exam_2.html" class="pagination-link" aria-label="Exam 2 Summary">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exam 2 Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb111" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb111-1"><a href="#cb111-1"></a><span class="co">---</span></span>
<span id="cb111-2"><a href="#cb111-2"></a><span class="an">title:</span><span class="co"> "Exam 1 Summary"</span></span>
<span id="cb111-3"><a href="#cb111-3"></a><span class="an">author:</span><span class="co"> "Gabriel Donelly Higgins"</span></span>
<span id="cb111-4"><a href="#cb111-4"></a><span class="an">date:</span><span class="co"> "March 30, 2025"</span></span>
<span id="cb111-5"><a href="#cb111-5"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb111-6"><a href="#cb111-6"></a><span class="co">---</span></span>
<span id="cb111-9"><a href="#cb111-9"></a><span class="in">```{r}</span></span>
<span id="cb111-10"><a href="#cb111-10"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb111-11"><a href="#cb111-11"></a><span class="fu">library</span>(sf)</span>
<span id="cb111-12"><a href="#cb111-12"></a><span class="fu">library</span>(maps)</span>
<span id="cb111-13"><a href="#cb111-13"></a><span class="fu">library</span>(mosaic)</span>
<span id="cb111-14"><a href="#cb111-14"></a><span class="fu">library</span>(gplots)</span>
<span id="cb111-15"><a href="#cb111-15"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb111-16"><a href="#cb111-16"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb111-17"><a href="#cb111-17"></a><span class="in">```</span></span>
<span id="cb111-18"><a href="#cb111-18"></a><span class="fu">## The Max Number of Variables in a Viz is 7:</span></span>
<span id="cb111-19"><a href="#cb111-19"></a></span>
<span id="cb111-20"><a href="#cb111-20"></a><span class="ss"> - </span>X-axis</span>
<span id="cb111-21"><a href="#cb111-21"></a><span class="ss"> - </span>Y-axis</span>
<span id="cb111-22"><a href="#cb111-22"></a><span class="ss"> - </span>Opacity</span>
<span id="cb111-23"><a href="#cb111-23"></a><span class="ss"> - </span>Color</span>
<span id="cb111-24"><a href="#cb111-24"></a><span class="ss"> - </span>Size</span>
<span id="cb111-25"><a href="#cb111-25"></a><span class="ss"> - </span>Shape</span>
<span id="cb111-26"><a href="#cb111-26"></a><span class="ss"> - </span>Facets</span>
<span id="cb111-27"><a href="#cb111-27"></a><span class="ss"> - </span>3 dimensions</span>
<span id="cb111-28"><a href="#cb111-28"></a></span>
<span id="cb111-29"><a href="#cb111-29"></a><span class="fu">## Effective Viz Checklist:</span></span>
<span id="cb111-30"><a href="#cb111-30"></a></span>
<span id="cb111-31"><a href="#cb111-31"></a><span class="ss"> - </span>Is graph effective?</span>
<span id="cb111-32"><a href="#cb111-32"></a><span class="ss">  - </span>right for data</span>
<span id="cb111-33"><a href="#cb111-33"></a><span class="ss">  - </span>appropriate for story</span>
<span id="cb111-34"><a href="#cb111-34"></a><span class="ss">  - </span>clear purpose</span>
<span id="cb111-35"><a href="#cb111-35"></a><span class="ss">  - </span>appropriate audience</span>
<span id="cb111-36"><a href="#cb111-36"></a><span class="ss">  - </span>unbiased / inclusive</span>
<span id="cb111-37"><a href="#cb111-37"></a><span class="ss">  - </span>not misleading</span>
<span id="cb111-38"><a href="#cb111-38"></a></span>
<span id="cb111-39"><a href="#cb111-39"></a><span class="ss"> - </span>Is graph complete?</span>
<span id="cb111-40"><a href="#cb111-40"></a><span class="ss">  - </span>title</span>
<span id="cb111-41"><a href="#cb111-41"></a><span class="ss">  - </span>subtitle</span>
<span id="cb111-42"><a href="#cb111-42"></a><span class="ss">  - </span>X-axis label</span>
<span id="cb111-43"><a href="#cb111-43"></a><span class="ss">  - </span>X-axis marks</span>
<span id="cb111-44"><a href="#cb111-44"></a><span class="ss">  - </span>Y-axis label</span>
<span id="cb111-45"><a href="#cb111-45"></a><span class="ss">  - </span>Y-axis marks</span>
<span id="cb111-46"><a href="#cb111-46"></a><span class="ss">  - </span>legend title</span>
<span id="cb111-47"><a href="#cb111-47"></a><span class="ss">  - </span>legend labels</span>
<span id="cb111-48"><a href="#cb111-48"></a><span class="ss">  - </span>capition (author, date, source)</span>
<span id="cb111-49"><a href="#cb111-49"></a><span class="ss">  - </span>data labels</span>
<span id="cb111-50"><a href="#cb111-50"></a><span class="ss">  - </span>date annotation</span>
<span id="cb111-51"><a href="#cb111-51"></a></span>
<span id="cb111-52"><a href="#cb111-52"></a><span class="ss"> - </span>Is graph accessible</span>
<span id="cb111-53"><a href="#cb111-53"></a><span class="ss">  - </span>color (fill, border, background, text)</span>
<span id="cb111-54"><a href="#cb111-54"></a><span class="ss">  - </span>alt-text</span>
<span id="cb111-55"><a href="#cb111-55"></a><span class="ss">  - </span>text size</span>
<span id="cb111-56"><a href="#cb111-56"></a></span>
<span id="cb111-57"><a href="#cb111-57"></a><span class="fu">## Steps to an Effective Viz:</span></span>
<span id="cb111-58"><a href="#cb111-58"></a></span>
<span id="cb111-59"><a href="#cb111-59"></a><span class="ss"> - </span>Identify simple research questions</span>
<span id="cb111-60"><a href="#cb111-60"></a><span class="ss">  - </span>what do you want to understand about the variables or the relationships among them?</span>
<span id="cb111-61"><a href="#cb111-61"></a><span class="ss"> - </span>Start with the basic and work incrementally</span>
<span id="cb111-62"><a href="#cb111-62"></a><span class="ss">  - </span>Identify what variables you want to include in your plot and what structure these have (e.g: categorical,      quantitative, dates)</span>
<span id="cb111-63"><a href="#cb111-63"></a><span class="ss">  - </span>start simply, build a plot of just one of these variables, or the relationship between two of the variables</span>
<span id="cb111-64"><a href="#cb111-64"></a><span class="ss">  - </span>set up a plotting frame and add just one geometric layer at a time</span>
<span id="cb111-65"><a href="#cb111-65"></a><span class="ss">  - </span>start tweaking: add whatever new variables you want to examine</span>
<span id="cb111-66"><a href="#cb111-66"></a><span class="ss"> - </span>Ask your plot questions</span>
<span id="cb111-67"><a href="#cb111-67"></a><span class="ss">  - </span>what questions does your plot answer? What questions are left unanswered by your plot?</span>
<span id="cb111-68"><a href="#cb111-68"></a><span class="ss">  - </span>what new questions does your plot spark/inspire?</span>
<span id="cb111-69"><a href="#cb111-69"></a><span class="ss">  - </span>do you have the visualization tools to answer these questions, or might you learn more?</span>
<span id="cb111-70"><a href="#cb111-70"></a><span class="ss"> - </span>Focus</span>
<span id="cb111-71"><a href="#cb111-71"></a><span class="ss">  - </span>reporting a large number of visualizations can overwhelm the audience and obscure your conclusions.            Instead, pick out a focused yet comprehensive set of visualizations.</span>
<span id="cb111-72"><a href="#cb111-72"></a></span>
<span id="cb111-73"><a href="#cb111-73"></a><span class="fu">## Data in Spreadsheets is Called Tidy When:</span></span>
<span id="cb111-74"><a href="#cb111-74"></a></span>
<span id="cb111-75"><a href="#cb111-75"></a><span class="ss"> - </span>Each row = a unit of observation</span>
<span id="cb111-76"><a href="#cb111-76"></a><span class="ss"> - </span>Each column = a measure of some variable of interest:</span>
<span id="cb111-77"><a href="#cb111-77"></a><span class="ss">  - </span>quantitative = numbers with units</span>
<span id="cb111-78"><a href="#cb111-78"></a><span class="ss">  - </span>categorical = discrete possibilities or categories</span>
<span id="cb111-79"><a href="#cb111-79"></a><span class="ss"> - </span>Each entry contains a single data value, ie, no analysis, summaries, footnotes, comments, etc. Only one        value per cell</span>
<span id="cb111-80"><a href="#cb111-80"></a></span>
<span id="cb111-81"><a href="#cb111-81"></a><span class="fu">## Bivariate / Multivariate Viz:</span></span>
<span id="cb111-82"><a href="#cb111-82"></a></span>
<span id="cb111-83"><a href="#cb111-83"></a>In bivariate viz there are two variables. One is an independent variable and one is a dependent variable. You are trying to explain the variability of one variable relative to the other. </span>
<span id="cb111-84"><a href="#cb111-84"></a></span>
<span id="cb111-87"><a href="#cb111-87"></a><span class="in">```{r}</span></span>
<span id="cb111-88"><a href="#cb111-88"></a>elections <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_county.csv"</span>)</span>
<span id="cb111-89"><a href="#cb111-89"></a></span>
<span id="cb111-90"><a href="#cb111-90"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> repub_pct_16, <span class="at">y =</span> repub_pct_20)) <span class="sc">+</span></span>
<span id="cb111-91"><a href="#cb111-91"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb111-92"><a href="#cb111-92"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span>
<span id="cb111-93"><a href="#cb111-93"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Percent of Republican Vote in 2016"</span>, <span class="at">title =</span> <span class="st">"Republican Vote by County in 2016 vs 2020"</span>, <span class="at">y =</span> <span class="st">"Percent of Republican Support in 2020"</span>)</span>
<span id="cb111-94"><a href="#cb111-94"></a><span class="in">```</span></span>
<span id="cb111-95"><a href="#cb111-95"></a></span>
<span id="cb111-96"><a href="#cb111-96"></a>In multivariate viz, you just use more variables to show the relationship between them.</span>
<span id="cb111-97"><a href="#cb111-97"></a></span>
<span id="cb111-100"><a href="#cb111-100"></a><span class="in">```{r}</span></span>
<span id="cb111-101"><a href="#cb111-101"></a>weather <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/weather_3_locations.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb111-102"><a href="#cb111-102"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))  </span>
<span id="cb111-103"><a href="#cb111-103"></a></span>
<span id="cb111-104"><a href="#cb111-104"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> temp3pm, <span class="at">x =</span> temp9am, <span class="at">color =</span> location)) <span class="sc">+</span> </span>
<span id="cb111-105"><a href="#cb111-105"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb111-106"><a href="#cb111-106"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb111-107"><a href="#cb111-107"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Temperature at 9 am"</span>, <span class="at">title =</span> <span class="st">"Weather observation in Australia"</span>,<span class="at">y =</span> <span class="st">"Temperature at 3 pm"</span>, <span class="at">color =</span> <span class="st">"Location"</span>)</span>
<span id="cb111-108"><a href="#cb111-108"></a><span class="in">```</span></span>
<span id="cb111-109"><a href="#cb111-109"></a></span>
<span id="cb111-110"><a href="#cb111-110"></a><span class="fu">## Spatial Viz:</span></span>
<span id="cb111-111"><a href="#cb111-111"></a></span>
<span id="cb111-112"><a href="#cb111-112"></a>Create a map widget by calling leaflet( ) and telling it the data to use</span>
<span id="cb111-115"><a href="#cb111-115"></a><span class="in">```{r}</span></span>
<span id="cb111-116"><a href="#cb111-116"></a>fave_places <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://hash-mac.github.io/stat112site-s25/data/our_fave_places.csv"</span>)</span>
<span id="cb111-117"><a href="#cb111-117"></a></span>
<span id="cb111-118"><a href="#cb111-118"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places)</span>
<span id="cb111-119"><a href="#cb111-119"></a><span class="in">```</span></span>
<span id="cb111-120"><a href="#cb111-120"></a></span>
<span id="cb111-121"><a href="#cb111-121"></a>Add a base map using addTiles( ) or addProviderTiles( )</span>
<span id="cb111-124"><a href="#cb111-124"></a><span class="in">```{r}</span></span>
<span id="cb111-125"><a href="#cb111-125"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places) <span class="sc">|&gt;</span> </span>
<span id="cb111-126"><a href="#cb111-126"></a>  <span class="fu">addTiles</span>()</span>
<span id="cb111-127"><a href="#cb111-127"></a><span class="in">```</span></span>
<span id="cb111-128"><a href="#cb111-128"></a></span>
<span id="cb111-129"><a href="#cb111-129"></a>Add layers to the map using layer functions(addMarkers( ) or addPolygons( ))</span>
<span id="cb111-132"><a href="#cb111-132"></a><span class="in">```{r}</span></span>
<span id="cb111-133"><a href="#cb111-133"></a><span class="fu">leaflet</span>(<span class="at">data =</span> fave_places) <span class="sc">|&gt;</span> </span>
<span id="cb111-134"><a href="#cb111-134"></a>  <span class="fu">addTiles</span>() <span class="sc">|&gt;</span> </span>
<span id="cb111-135"><a href="#cb111-135"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> <span class="sc">~</span>longitude, <span class="at">lat =</span> <span class="sc">~</span>latitude)</span>
<span id="cb111-136"><a href="#cb111-136"></a><span class="in">```</span></span>
<span id="cb111-137"><a href="#cb111-137"></a>Print the map widget to display it</span>
<span id="cb111-138"><a href="#cb111-138"></a></span>
<span id="cb111-139"><a href="#cb111-139"></a></span>
<span id="cb111-140"><a href="#cb111-140"></a><span class="fu">## The 3 Types of Spatial Viz:</span></span>
<span id="cb111-141"><a href="#cb111-141"></a></span>
<span id="cb111-142"><a href="#cb111-142"></a>Point map: Maps plotting individual observations</span>
<span id="cb111-145"><a href="#cb111-145"></a><span class="in">```{r}</span></span>
<span id="cb111-146"><a href="#cb111-146"></a>starbucks <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/starbucks.csv"</span>)</span>
<span id="cb111-147"><a href="#cb111-147"></a></span>
<span id="cb111-148"><a href="#cb111-148"></a><span class="fu">ggplot</span>(starbucks, <span class="fu">aes</span>(<span class="at">y =</span> Latitude, <span class="at">x =</span> Longitude)) <span class="sc">+</span> </span>
<span id="cb111-149"><a href="#cb111-149"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>)</span>
<span id="cb111-150"><a href="#cb111-150"></a><span class="in">```</span></span>
<span id="cb111-151"><a href="#cb111-151"></a></span>
<span id="cb111-152"><a href="#cb111-152"></a></span>
<span id="cb111-153"><a href="#cb111-153"></a>Contour maps: Maps plotting the density of the distribution of observations</span>
<span id="cb111-156"><a href="#cb111-156"></a><span class="in">```{r}</span></span>
<span id="cb111-157"><a href="#cb111-157"></a>starbucks_cma <span class="ot">&lt;-</span> starbucks_cma <span class="ot">&lt;-</span> starbucks <span class="sc">|&gt;</span> </span>
<span id="cb111-158"><a href="#cb111-158"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'CA'</span>, <span class="st">'MX'</span>, <span class="st">'US'</span>))</span>
<span id="cb111-159"><a href="#cb111-159"></a></span>
<span id="cb111-160"><a href="#cb111-160"></a>cma_boundaries <span class="ot">&lt;-</span> <span class="fu">ne_states</span>(</span>
<span id="cb111-161"><a href="#cb111-161"></a>  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">"canada"</span>, <span class="st">"mexico"</span>, <span class="st">"united states of america"</span>),</span>
<span id="cb111-162"><a href="#cb111-162"></a>  <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb111-163"><a href="#cb111-163"></a></span>
<span id="cb111-164"><a href="#cb111-164"></a><span class="fu">ggplot</span>(cma_boundaries) <span class="sc">+</span> </span>
<span id="cb111-165"><a href="#cb111-165"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb111-166"><a href="#cb111-166"></a>  <span class="fu">geom_density_2d</span>(</span>
<span id="cb111-167"><a href="#cb111-167"></a>    <span class="at">data =</span> starbucks_cma,</span>
<span id="cb111-168"><a href="#cb111-168"></a>    <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude),</span>
<span id="cb111-169"><a href="#cb111-169"></a>    <span class="at">size =</span> <span class="fl">0.2</span>,</span>
<span id="cb111-170"><a href="#cb111-170"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span></span>
<span id="cb111-171"><a href="#cb111-171"></a>  ) <span class="sc">+</span></span>
<span id="cb111-172"><a href="#cb111-172"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">179.14</span>, <span class="sc">-</span><span class="dv">50</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">14.54</span>, <span class="fl">83.11</span>)) <span class="sc">+</span></span>
<span id="cb111-173"><a href="#cb111-173"></a>  <span class="fu">theme_map</span>()</span>
<span id="cb111-174"><a href="#cb111-174"></a><span class="in">```</span></span>
<span id="cb111-175"><a href="#cb111-175"></a></span>
<span id="cb111-176"><a href="#cb111-176"></a></span>
<span id="cb111-177"><a href="#cb111-177"></a>Choropleth maps: Maps plotting outcomes in different regions</span>
<span id="cb111-180"><a href="#cb111-180"></a><span class="in">```{r}</span></span>
<span id="cb111-181"><a href="#cb111-181"></a>elections_by_state <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_by_state.csv"</span>)</span>
<span id="cb111-182"><a href="#cb111-182"></a>elections_by_counties <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/election_2020_county.csv"</span>)</span>
<span id="cb111-183"><a href="#cb111-183"></a></span>
<span id="cb111-184"><a href="#cb111-184"></a>elections_by_state <span class="ot">&lt;-</span> elections_by_state <span class="sc">|&gt;</span> </span>
<span id="cb111-185"><a href="#cb111-185"></a>  <span class="fu">filter</span>(state_abbr <span class="sc">!=</span> <span class="st">"DC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb111-186"><a href="#cb111-186"></a>  <span class="fu">select</span>(state_name, state_abbr, repub_pct_20) <span class="sc">|&gt;</span> </span>
<span id="cb111-187"><a href="#cb111-187"></a>  <span class="fu">mutate</span>(<span class="at">repub_20_categories =</span> </span>
<span id="cb111-188"><a href="#cb111-188"></a>           <span class="fu">cut</span>(repub_pct_20, </span>
<span id="cb111-189"><a href="#cb111-189"></a>               <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">70</span>, <span class="at">by =</span> <span class="dv">5</span>), </span>
<span id="cb111-190"><a href="#cb111-190"></a>               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>, <span class="st">"45-49"</span>,</span>
<span id="cb111-191"><a href="#cb111-191"></a>                          <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-70"</span>), </span>
<span id="cb111-192"><a href="#cb111-192"></a>               <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb111-193"><a href="#cb111-193"></a></span>
<span id="cb111-194"><a href="#cb111-194"></a>elections_by_counties <span class="ot">&lt;-</span> elections_by_counties <span class="sc">|&gt;</span> </span>
<span id="cb111-195"><a href="#cb111-195"></a>  <span class="fu">select</span>(state_name, state_abbr, county_name, county_fips,</span>
<span id="cb111-196"><a href="#cb111-196"></a>          repub_pct_20, median_age, median_rent) <span class="sc">|&gt;</span> </span>
<span id="cb111-197"><a href="#cb111-197"></a>  <span class="fu">mutate</span>(<span class="at">repub_20_categories =</span> </span>
<span id="cb111-198"><a href="#cb111-198"></a>           <span class="fu">cut</span>(repub_pct_20, </span>
<span id="cb111-199"><a href="#cb111-199"></a>               <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>),</span>
<span id="cb111-200"><a href="#cb111-200"></a>               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0-9"</span>, <span class="st">"10-19"</span>, <span class="st">"20-29"</span>, <span class="st">"30-39"</span>, <span class="st">"40-49"</span>,</span>
<span id="cb111-201"><a href="#cb111-201"></a>                          <span class="st">"50-59"</span>, <span class="st">"60-69"</span>, <span class="st">"70-79"</span>, <span class="st">"80-89"</span>, <span class="st">"90-100"</span>),</span>
<span id="cb111-202"><a href="#cb111-202"></a>               <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb111-203"><a href="#cb111-203"></a></span>
<span id="cb111-204"><a href="#cb111-204"></a>states_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb111-205"><a href="#cb111-205"></a></span>
<span id="cb111-206"><a href="#cb111-206"></a><span class="fu">ggplot</span>(elections_by_state, <span class="fu">aes</span>(<span class="at">map_id =</span> state_name, <span class="at">fill =</span> repub_pct_20)) <span class="sc">+</span></span>
<span id="cb111-207"><a href="#cb111-207"></a>  <span class="fu">geom_map</span>(<span class="at">map =</span> states_map) <span class="sc">+</span></span>
<span id="cb111-208"><a href="#cb111-208"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> states_map<span class="sc">$</span>long, <span class="at">y =</span> states_map<span class="sc">$</span>lat) <span class="sc">+</span></span>
<span id="cb111-209"><a href="#cb111-209"></a>  <span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb111-210"><a href="#cb111-210"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"% of Republican Support"</span>)</span>
<span id="cb111-211"><a href="#cb111-211"></a><span class="in">```</span></span>
<span id="cb111-212"><a href="#cb111-212"></a></span>
<span id="cb111-213"><a href="#cb111-213"></a></span>
<span id="cb111-214"><a href="#cb111-214"></a><span class="fu">## Alt text and titles</span></span>
<span id="cb111-215"><a href="#cb111-215"></a></span>
<span id="cb111-216"><a href="#cb111-216"></a>Alt text is a written description of the viz that can be read by a screen reader</span>
<span id="cb111-219"><a href="#cb111-219"></a><span class="in">```{r}</span></span>
<span id="cb111-220"><a href="#cb111-220"></a><span class="co">#| fig-alt: "This is a density plot containing a numerical and a categorical variable. The numerical variable in the temperature at 3 pm in Celcius. The categorical variable is the location where the temperature was measured. The numerical variable, the temperature, is on the x-axis. The y-axis represents the density of observations. The density plot has created 3 different lumps, each color coded for the legend which matches them to their location. The Hobart lump rises from 0 degrees celcius to 12.5, where it plateus before falling again at 17.5 and becoming exponentially lower on the y-axis as it approaches 40 degrees celcius on the x-axis. The Uluru lump rises from 10 degrees celcius, and has a series of plataeus followed by elevations until it reaches 37.5 degrees where it begins its decline till it reaches 40 degrees celcius on the x-axis. The Wollongong lump rises rapidly at 12.5 degrees celcius, peaks at 20 degrees celcius, and then rapidly falls till 27.5 degrees celcius where it then has a slightly negative plateuatill 40 degrees celcius."</span></span>
<span id="cb111-221"><a href="#cb111-221"></a></span>
<span id="cb111-222"><a href="#cb111-222"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> temp3pm, <span class="at">fill =</span> location)) <span class="sc">+</span> </span>
<span id="cb111-223"><a href="#cb111-223"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb111-224"><a href="#cb111-224"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"3pm temperature (Celsius)"</span>)  </span>
<span id="cb111-225"><a href="#cb111-225"></a><span class="in">```</span></span>
<span id="cb111-226"><a href="#cb111-226"></a></span>
<span id="cb111-227"><a href="#cb111-227"></a>The title is a 1-sentence description of a plot</span>
<span id="cb111-230"><a href="#cb111-230"></a><span class="in">```{r}</span></span>
<span id="cb111-231"><a href="#cb111-231"></a><span class="co">#| fig-cap: "Density plots of 3pm temperatures in 3 Australian locations."</span></span>
<span id="cb111-232"><a href="#cb111-232"></a></span>
<span id="cb111-233"><a href="#cb111-233"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> temp3pm, <span class="at">fill =</span> location)) <span class="sc">+</span> </span>
<span id="cb111-234"><a href="#cb111-234"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb111-235"><a href="#cb111-235"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"3pm temperature (Celsius)"</span>)  </span>
<span id="cb111-236"><a href="#cb111-236"></a><span class="in">```</span></span>
<span id="cb111-237"><a href="#cb111-237"></a></span>
<span id="cb111-238"><a href="#cb111-238"></a><span class="fu">## Categorical plots</span></span>
<span id="cb111-239"><a href="#cb111-239"></a></span>
<span id="cb111-240"><a href="#cb111-240"></a>**1 variable:**</span>
<span id="cb111-241"><a href="#cb111-241"></a></span>
<span id="cb111-242"><a href="#cb111-242"></a>Bar chart (just counts observations)</span>
<span id="cb111-245"><a href="#cb111-245"></a><span class="in">```{r}</span></span>
<span id="cb111-246"><a href="#cb111-246"></a>hikes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/high_peaks.csv"</span>)</span>
<span id="cb111-247"><a href="#cb111-247"></a></span>
<span id="cb111-248"><a href="#cb111-248"></a><span class="fu">ggplot</span>(hikes, <span class="fu">aes</span>(<span class="at">x =</span> rating)) <span class="sc">+</span></span>
<span id="cb111-249"><a href="#cb111-249"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb111-250"><a href="#cb111-250"></a><span class="in">```</span></span>
<span id="cb111-251"><a href="#cb111-251"></a></span>
<span id="cb111-252"><a href="#cb111-252"></a>**2 variables:**</span>
<span id="cb111-253"><a href="#cb111-253"></a></span>
<span id="cb111-254"><a href="#cb111-254"></a>Bar charts:</span>
<span id="cb111-255"><a href="#cb111-255"></a><span class="ss">  - </span>stacked (heights vary, but each color (stripe) of the bar follows the Y-axis)</span>
<span id="cb111-258"><a href="#cb111-258"></a><span class="in">```{r}</span></span>
<span id="cb111-259"><a href="#cb111-259"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb111-260"><a href="#cb111-260"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb111-261"><a href="#cb111-261"></a><span class="in">```</span></span>
<span id="cb111-262"><a href="#cb111-262"></a><span class="ss">  - </span>dodge (side by side)</span>
<span id="cb111-265"><a href="#cb111-265"></a><span class="in">```{r}</span></span>
<span id="cb111-266"><a href="#cb111-266"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb111-267"><a href="#cb111-267"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb111-268"><a href="#cb111-268"></a><span class="in">```</span></span>
<span id="cb111-269"><a href="#cb111-269"></a><span class="ss">  - </span>proportional (all same height)</span>
<span id="cb111-270"><a href="#cb111-270"></a><span class="ss">    - </span>this loses information about the number of observations</span>
<span id="cb111-273"><a href="#cb111-273"></a><span class="in">```{r}</span></span>
<span id="cb111-274"><a href="#cb111-274"></a><span class="fu">ggplot</span>(elections, <span class="fu">aes</span>(<span class="at">x =</span> historical, <span class="at">fill =</span> winner_20)) <span class="sc">+</span></span>
<span id="cb111-275"><a href="#cb111-275"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span>
<span id="cb111-276"><a href="#cb111-276"></a><span class="in">```</span></span>
<span id="cb111-277"><a href="#cb111-277"></a></span>
<span id="cb111-278"><a href="#cb111-278"></a>**3 variables:**</span>
<span id="cb111-279"><a href="#cb111-279"></a></span>
<span id="cb111-280"><a href="#cb111-280"></a>Facted wrapped bar charts:</span>
<span id="cb111-281"><a href="#cb111-281"></a><span class="ss">  - </span>facet wrapped stacked</span>
<span id="cb111-284"><a href="#cb111-284"></a><span class="in">```{r}</span></span>
<span id="cb111-285"><a href="#cb111-285"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb111-286"><a href="#cb111-286"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb111-287"><a href="#cb111-287"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-288"><a href="#cb111-288"></a><span class="in">```</span></span>
<span id="cb111-289"><a href="#cb111-289"></a><span class="ss">  - </span>facet wrapped dodge</span>
<span id="cb111-292"><a href="#cb111-292"></a><span class="in">```{r}</span></span>
<span id="cb111-293"><a href="#cb111-293"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb111-294"><a href="#cb111-294"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb111-295"><a href="#cb111-295"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-296"><a href="#cb111-296"></a><span class="in">```</span></span>
<span id="cb111-297"><a href="#cb111-297"></a><span class="ss">  - </span>facet wrapped proportional</span>
<span id="cb111-300"><a href="#cb111-300"></a><span class="in">```{r}</span></span>
<span id="cb111-301"><a href="#cb111-301"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> raintoday, <span class="at">fill =</span> raintomorrow)) <span class="sc">+</span> </span>
<span id="cb111-302"><a href="#cb111-302"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb111-303"><a href="#cb111-303"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-304"><a href="#cb111-304"></a><span class="in">```</span></span>
<span id="cb111-305"><a href="#cb111-305"></a></span>
<span id="cb111-306"><a href="#cb111-306"></a><span class="fu">## Numerical Plots:</span></span>
<span id="cb111-307"><a href="#cb111-307"></a></span>
<span id="cb111-308"><a href="#cb111-308"></a>**1 variable:**</span>
<span id="cb111-309"><a href="#cb111-309"></a></span>
<span id="cb111-310"><a href="#cb111-310"></a>Histogram</span>
<span id="cb111-313"><a href="#cb111-313"></a><span class="in">```{r}</span></span>
<span id="cb111-314"><a href="#cb111-314"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb111-315"><a href="#cb111-315"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb111-316"><a href="#cb111-316"></a><span class="in">```</span></span>
<span id="cb111-317"><a href="#cb111-317"></a></span>
<span id="cb111-318"><a href="#cb111-318"></a>Box plot</span>
<span id="cb111-321"><a href="#cb111-321"></a><span class="in">```{r}</span></span>
<span id="cb111-322"><a href="#cb111-322"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb111-323"><a href="#cb111-323"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb111-324"><a href="#cb111-324"></a><span class="in">```</span></span>
<span id="cb111-325"><a href="#cb111-325"></a></span>
<span id="cb111-326"><a href="#cb111-326"></a>Density plot</span>
<span id="cb111-329"><a href="#cb111-329"></a><span class="in">```{r}</span></span>
<span id="cb111-330"><a href="#cb111-330"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb111-331"><a href="#cb111-331"></a>  <span class="fu">geom_density</span>()</span>
<span id="cb111-332"><a href="#cb111-332"></a><span class="in">```</span></span>
<span id="cb111-333"><a href="#cb111-333"></a></span>
<span id="cb111-334"><a href="#cb111-334"></a>**2 variables:**</span>
<span id="cb111-335"><a href="#cb111-335"></a></span>
<span id="cb111-336"><a href="#cb111-336"></a>Scatterplot</span>
<span id="cb111-339"><a href="#cb111-339"></a><span class="in">```{r}</span></span>
<span id="cb111-340"><a href="#cb111-340"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp)) <span class="sc">+</span></span>
<span id="cb111-341"><a href="#cb111-341"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb111-342"><a href="#cb111-342"></a><span class="in">```</span></span>
<span id="cb111-343"><a href="#cb111-343"></a></span>
<span id="cb111-344"><a href="#cb111-344"></a>Line plot</span>
<span id="cb111-347"><a href="#cb111-347"></a><span class="in">```{r}</span></span>
<span id="cb111-348"><a href="#cb111-348"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp)) <span class="sc">+</span></span>
<span id="cb111-349"><a href="#cb111-349"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb111-350"><a href="#cb111-350"></a><span class="in">```</span></span>
<span id="cb111-351"><a href="#cb111-351"></a></span>
<span id="cb111-352"><a href="#cb111-352"></a>**3 variables:**</span>
<span id="cb111-353"><a href="#cb111-353"></a></span>
<span id="cb111-354"><a href="#cb111-354"></a>Scatterplot</span>
<span id="cb111-355"><a href="#cb111-355"></a><span class="ss">  - </span>color</span>
<span id="cb111-358"><a href="#cb111-358"></a><span class="in">```{r}</span></span>
<span id="cb111-359"><a href="#cb111-359"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">color =</span> windspeed9am)) <span class="sc">+</span></span>
<span id="cb111-360"><a href="#cb111-360"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>)</span>
<span id="cb111-361"><a href="#cb111-361"></a><span class="in">```</span></span>
<span id="cb111-362"><a href="#cb111-362"></a><span class="ss">  - </span>proportional symbols</span>
<span id="cb111-365"><a href="#cb111-365"></a><span class="in">```{r}</span></span>
<span id="cb111-366"><a href="#cb111-366"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">size =</span> rainfall)) <span class="sc">+</span></span>
<span id="cb111-367"><a href="#cb111-367"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb111-368"><a href="#cb111-368"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">name =</span> <span class="st">"rainfall"</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span>
<span id="cb111-369"><a href="#cb111-369"></a><span class="in">```</span></span>
<span id="cb111-370"><a href="#cb111-370"></a><span class="ss">  - </span>opacity</span>
<span id="cb111-373"><a href="#cb111-373"></a><span class="in">```{r}</span></span>
<span id="cb111-374"><a href="#cb111-374"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> maxtemp, <span class="at">y =</span> mintemp, <span class="at">alpha =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb111-375"><a href="#cb111-375"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb111-376"><a href="#cb111-376"></a><span class="in">```</span></span>
<span id="cb111-377"><a href="#cb111-377"></a></span>
<span id="cb111-378"><a href="#cb111-378"></a><span class="fu">## Mixed Variable Plots:</span></span>
<span id="cb111-379"><a href="#cb111-379"></a></span>
<span id="cb111-380"><a href="#cb111-380"></a>**1 numerical + 1 categorical:**</span>
<span id="cb111-381"><a href="#cb111-381"></a></span>
<span id="cb111-382"><a href="#cb111-382"></a>Density plots:</span>
<span id="cb111-383"><a href="#cb111-383"></a><span class="ss">  - </span>faceted</span>
<span id="cb111-386"><a href="#cb111-386"></a><span class="in">```{r}</span></span>
<span id="cb111-387"><a href="#cb111-387"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb111-388"><a href="#cb111-388"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb111-389"><a href="#cb111-389"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-390"><a href="#cb111-390"></a><span class="in">```</span></span>
<span id="cb111-391"><a href="#cb111-391"></a><span class="ss">  - </span>color</span>
<span id="cb111-394"><a href="#cb111-394"></a><span class="in">```{r}</span></span>
<span id="cb111-395"><a href="#cb111-395"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed, <span class="at">fill =</span> location)) <span class="sc">+</span></span>
<span id="cb111-396"><a href="#cb111-396"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb111-397"><a href="#cb111-397"></a><span class="in">```</span></span>
<span id="cb111-398"><a href="#cb111-398"></a></span>
<span id="cb111-399"><a href="#cb111-399"></a>Box plot (faceted)</span>
<span id="cb111-402"><a href="#cb111-402"></a><span class="in">```{r}</span></span>
<span id="cb111-403"><a href="#cb111-403"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb111-404"><a href="#cb111-404"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb111-405"><a href="#cb111-405"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-406"><a href="#cb111-406"></a><span class="in">```</span></span>
<span id="cb111-407"><a href="#cb111-407"></a></span>
<span id="cb111-408"><a href="#cb111-408"></a>Violin</span>
<span id="cb111-411"><a href="#cb111-411"></a><span class="in">```{r}</span></span>
<span id="cb111-412"><a href="#cb111-412"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">y =</span> windgustspeed, <span class="at">x =</span> location)) <span class="sc">+</span></span>
<span id="cb111-413"><a href="#cb111-413"></a>  <span class="fu">geom_violin</span>()</span>
<span id="cb111-414"><a href="#cb111-414"></a><span class="in">```</span></span>
<span id="cb111-415"><a href="#cb111-415"></a>Histograms:</span>
<span id="cb111-416"><a href="#cb111-416"></a><span class="ss">  - </span>faceted</span>
<span id="cb111-419"><a href="#cb111-419"></a><span class="in">```{r}</span></span>
<span id="cb111-420"><a href="#cb111-420"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed)) <span class="sc">+</span></span>
<span id="cb111-421"><a href="#cb111-421"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb111-422"><a href="#cb111-422"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-423"><a href="#cb111-423"></a><span class="in">```</span></span>
<span id="cb111-424"><a href="#cb111-424"></a><span class="ss">  - </span>fill / color</span>
<span id="cb111-427"><a href="#cb111-427"></a><span class="in">```{r}</span></span>
<span id="cb111-428"><a href="#cb111-428"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> windgustspeed, <span class="at">fill =</span> location)) <span class="sc">+</span></span>
<span id="cb111-429"><a href="#cb111-429"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb111-430"><a href="#cb111-430"></a><span class="in">```</span></span>
<span id="cb111-431"><a href="#cb111-431"></a></span>
<span id="cb111-432"><a href="#cb111-432"></a>**1 numerical + 2 categorical:**</span>
<span id="cb111-433"><a href="#cb111-433"></a></span>
<span id="cb111-434"><a href="#cb111-434"></a>Heat map</span>
<span id="cb111-437"><a href="#cb111-437"></a><span class="in">```{r}</span></span>
<span id="cb111-438"><a href="#cb111-438"></a><span class="co">#| fig-height: 15</span></span>
<span id="cb111-439"><a href="#cb111-439"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb111-440"><a href="#cb111-440"></a>education <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/sat.csv"</span>)</span>
<span id="cb111-441"><a href="#cb111-441"></a></span>
<span id="cb111-442"><a href="#cb111-442"></a>plot_data <span class="ot">&lt;-</span> education <span class="sc">|&gt;</span> </span>
<span id="cb111-443"><a href="#cb111-443"></a>  <span class="fu">column_to_rownames</span>(<span class="st">"State"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb111-444"><a href="#cb111-444"></a>  <span class="fu">data.matrix</span>() <span class="sc">|&gt;</span> </span>
<span id="cb111-445"><a href="#cb111-445"></a>  <span class="fu">scale</span>()</span>
<span id="cb111-446"><a href="#cb111-446"></a></span>
<span id="cb111-447"><a href="#cb111-447"></a><span class="fu">heatmap.2</span>(plot_data,</span>
<span id="cb111-448"><a href="#cb111-448"></a>  <span class="at">dendrogram =</span> <span class="st">"none"</span>,</span>
<span id="cb111-449"><a href="#cb111-449"></a>  <span class="at">Rowv =</span> <span class="cn">NA</span>, </span>
<span id="cb111-450"><a href="#cb111-450"></a>  <span class="at">scale =</span> <span class="st">"column"</span>,</span>
<span id="cb111-451"><a href="#cb111-451"></a>  <span class="at">keysize =</span> <span class="fl">0.7</span>, </span>
<span id="cb111-452"><a href="#cb111-452"></a>  <span class="at">density.info =</span> <span class="st">"none"</span>,</span>
<span id="cb111-453"><a href="#cb111-453"></a>  <span class="at">col =</span> <span class="fu">hcl.colors</span>(<span class="dv">256</span>), </span>
<span id="cb111-454"><a href="#cb111-454"></a>  <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>),</span>
<span id="cb111-455"><a href="#cb111-455"></a>  <span class="at">colsep =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>), <span class="at">rowsep =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>), <span class="at">sepwidth =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.05</span>),</span>
<span id="cb111-456"><a href="#cb111-456"></a>  <span class="at">sepcolor =</span> <span class="st">"white"</span>, <span class="at">trace =</span> <span class="st">"none"</span></span>
<span id="cb111-457"><a href="#cb111-457"></a>)</span>
<span id="cb111-458"><a href="#cb111-458"></a><span class="in">```</span></span>
<span id="cb111-459"><a href="#cb111-459"></a></span>
<span id="cb111-460"><a href="#cb111-460"></a></span>
<span id="cb111-461"><a href="#cb111-461"></a>**2 numerical + 1 categorical:**</span>
<span id="cb111-462"><a href="#cb111-462"></a></span>
<span id="cb111-463"><a href="#cb111-463"></a>Scatterplots:</span>
<span id="cb111-464"><a href="#cb111-464"></a><span class="ss">  - </span>faceted</span>
<span id="cb111-467"><a href="#cb111-467"></a><span class="in">```{r}</span></span>
<span id="cb111-468"><a href="#cb111-468"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb111-469"><a href="#cb111-469"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb111-470"><a href="#cb111-470"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>location)</span>
<span id="cb111-471"><a href="#cb111-471"></a><span class="in">```</span></span>
<span id="cb111-472"><a href="#cb111-472"></a><span class="ss">  - </span>fill / coor</span>
<span id="cb111-475"><a href="#cb111-475"></a><span class="in">```{r}</span></span>
<span id="cb111-476"><a href="#cb111-476"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp, <span class="at">color =</span> location)) <span class="sc">+</span></span>
<span id="cb111-477"><a href="#cb111-477"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb111-478"><a href="#cb111-478"></a><span class="in">```</span></span>
<span id="cb111-479"><a href="#cb111-479"></a><span class="ss">  - </span>shape</span>
<span id="cb111-482"><a href="#cb111-482"></a><span class="in">```{r}</span></span>
<span id="cb111-483"><a href="#cb111-483"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp, <span class="at">shape =</span> location)) <span class="sc">+</span></span>
<span id="cb111-484"><a href="#cb111-484"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb111-485"><a href="#cb111-485"></a><span class="in">```</span></span>
<span id="cb111-486"><a href="#cb111-486"></a><span class="ss">  - </span>labeled points</span>
<span id="cb111-489"><a href="#cb111-489"></a><span class="in">```{r}</span></span>
<span id="cb111-490"><a href="#cb111-490"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> mintemp, <span class="at">y =</span> maxtemp)) <span class="sc">+</span></span>
<span id="cb111-491"><a href="#cb111-491"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> windgustdir), <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb111-492"><a href="#cb111-492"></a><span class="in">```</span></span>
<span id="cb111-493"><a href="#cb111-493"></a></span>
<span id="cb111-494"><a href="#cb111-494"></a><span class="fu">## Data manipulation</span></span>
<span id="cb111-495"><a href="#cb111-495"></a></span>
<span id="cb111-496"><a href="#cb111-496"></a>**Piping:**</span>
<span id="cb111-497"><a href="#cb111-497"></a>Use the |&gt; pipe operator. It makes the object on the left side pass to the function on the right to the get a new object.</span>
<span id="cb111-498"><a href="#cb111-498"></a></span>
<span id="cb111-499"><a href="#cb111-499"></a>**Types of reshaped data:**</span>
<span id="cb111-500"><a href="#cb111-500"></a><span class="ss">- </span>Aggregated data</span>
<span id="cb111-501"><a href="#cb111-501"></a><span class="ss">  - </span>Data that has had functions like group_by() or summarize() done to it. It gains aggregate information         about the observations but loses data on individual observations</span>
<span id="cb111-502"><a href="#cb111-502"></a><span class="ss">- </span>Raw data, reshaped</span>
<span id="cb111-503"><a href="#cb111-503"></a><span class="ss">  - </span>Data that is reshaped to maintain individual observations, but in a way that it can be properly               manipulated</span>
<span id="cb111-504"><a href="#cb111-504"></a></span>
<span id="cb111-505"><a href="#cb111-505"></a>**Unit of observation:**</span>
<span id="cb111-506"><a href="#cb111-506"></a>The level at which data is collected and analyzed, by individual cases or groups.</span>
<span id="cb111-507"><a href="#cb111-507"></a></span>
<span id="cb111-508"><a href="#cb111-508"></a>For example, in a dataset of students, each student is the unit of observation. In a dataset of cities, each city is the unit of observation. In a datset of daily weather data, each day is the unit of observation</span>
<span id="cb111-509"><a href="#cb111-509"></a></span>
<span id="cb111-510"><a href="#cb111-510"></a><span class="fu">## Command List:</span></span>
<span id="cb111-511"><a href="#cb111-511"></a></span>
<span id="cb111-512"><a href="#cb111-512"></a>| Verb             | Outcome                                                                 |</span>
<span id="cb111-513"><a href="#cb111-513"></a>|------------------|-------------------------------------------------------------------------|</span>
<span id="cb111-514"><a href="#cb111-514"></a>| <span class="in">`arrange`</span>        | Arrange the rows according to a variable                                |</span>
<span id="cb111-515"><a href="#cb111-515"></a>| <span class="in">`filter`</span>         | Filter out or obtain a subset of the rows                               |</span>
<span id="cb111-516"><a href="#cb111-516"></a>| <span class="in">`select`</span>         | Select a subset of the columns                                           |</span>
<span id="cb111-517"><a href="#cb111-517"></a>| <span class="in">`mutate`</span>         | Mutate or create a column                                               |</span>
<span id="cb111-518"><a href="#cb111-518"></a>| <span class="in">`summarize`</span>      | Calculate a numerical summary of a column                               |</span>
<span id="cb111-519"><a href="#cb111-519"></a>| <span class="in">`group_by`</span>       | Group the rows by a specified column                                    |</span>
<span id="cb111-520"><a href="#cb111-520"></a>| <span class="in">`ungroup`</span>        | Ungroups the previous <span class="in">`group_by`</span>                                        |</span>
<span id="cb111-521"><a href="#cb111-521"></a>| <span class="in">`count()`</span>        | Counts the number of observations in a group or just the whole column   |</span>
<span id="cb111-522"><a href="#cb111-522"></a>| <span class="in">`n()`</span>            | Also counts the number of observations in a group, but must be used inside of <span class="in">`summarize`</span> or <span class="in">`mutate`</span> |</span>
<span id="cb111-523"><a href="#cb111-523"></a>| <span class="in">`na.rm`</span>          | Makes it so that the expressions you use in your command do not have the <span class="in">`NA`</span> value |</span>
<span id="cb111-524"><a href="#cb111-524"></a>| <span class="in">`as.factor`</span>      | Use it in the <span class="in">`mutate`</span> command to make a variable categorical           |</span>
<span id="cb111-525"><a href="#cb111-525"></a>| <span class="in">`as.numeric`</span>     | Use it in the <span class="in">`mutate`</span> command to make a variable numeric               |</span>
<span id="cb111-526"><a href="#cb111-526"></a>| <span class="in">`head()`</span>         | Shows first rows of dataset                                             |</span>
<span id="cb111-527"><a href="#cb111-527"></a>| <span class="in">`library(package)`</span> | Loads package into program                                            |</span>
<span id="cb111-528"><a href="#cb111-528"></a></span>
<span id="cb111-529"><a href="#cb111-529"></a></span>
<span id="cb111-530"><a href="#cb111-530"></a>**arrange:**</span>
<span id="cb111-531"><a href="#cb111-531"></a></span>
<span id="cb111-532"><a href="#cb111-532"></a>We have dataset weather</span>
<span id="cb111-535"><a href="#cb111-535"></a><span class="in">```{r}</span></span>
<span id="cb111-536"><a href="#cb111-536"></a><span class="fu">head</span>(weather)</span>
<span id="cb111-537"><a href="#cb111-537"></a><span class="in">```</span></span>
<span id="cb111-538"><a href="#cb111-538"></a>And we use arrange(maxtemp) on it to order observations from lowest to highest value in maxtemp</span>
<span id="cb111-541"><a href="#cb111-541"></a><span class="in">```{r}</span></span>
<span id="cb111-542"><a href="#cb111-542"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-543"><a href="#cb111-543"></a>  <span class="fu">arrange</span>(maxtemp) <span class="sc">|&gt;</span></span>
<span id="cb111-544"><a href="#cb111-544"></a>  <span class="fu">head</span>()</span>
<span id="cb111-545"><a href="#cb111-545"></a><span class="in">```</span></span>
<span id="cb111-546"><a href="#cb111-546"></a>Or arrange(desc(maxtemp)) to order observations from highest to lowest value in maxtemp</span>
<span id="cb111-549"><a href="#cb111-549"></a><span class="in">```{r}</span></span>
<span id="cb111-550"><a href="#cb111-550"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-551"><a href="#cb111-551"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb111-552"><a href="#cb111-552"></a>  <span class="fu">head</span>()</span>
<span id="cb111-553"><a href="#cb111-553"></a><span class="in">```</span></span>
<span id="cb111-554"><a href="#cb111-554"></a></span>
<span id="cb111-555"><a href="#cb111-555"></a>**filter:**</span>
<span id="cb111-556"><a href="#cb111-556"></a></span>
<span id="cb111-557"><a href="#cb111-557"></a>We can use filter(maxtemp &lt; 45) to get observations with a maxtemp below 45</span>
<span id="cb111-560"><a href="#cb111-560"></a><span class="in">```{r}</span></span>
<span id="cb111-561"><a href="#cb111-561"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-562"><a href="#cb111-562"></a>  <span class="fu">filter</span>(maxtemp <span class="sc">&lt;</span> <span class="dv">45</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-563"><a href="#cb111-563"></a>  <span class="fu">head</span>()</span>
<span id="cb111-564"><a href="#cb111-564"></a><span class="in">```</span></span>
<span id="cb111-565"><a href="#cb111-565"></a></span>
<span id="cb111-566"><a href="#cb111-566"></a>**select:**</span>
<span id="cb111-567"><a href="#cb111-567"></a></span>
<span id="cb111-568"><a href="#cb111-568"></a>We can use select(maxtemp, mintemp, location) to only select those columns</span>
<span id="cb111-571"><a href="#cb111-571"></a><span class="in">```{r}</span></span>
<span id="cb111-572"><a href="#cb111-572"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-573"><a href="#cb111-573"></a>  <span class="fu">select</span>(maxtemp, mintemp, location) <span class="sc">|&gt;</span></span>
<span id="cb111-574"><a href="#cb111-574"></a>  <span class="fu">head</span>()</span>
<span id="cb111-575"><a href="#cb111-575"></a><span class="in">```</span></span>
<span id="cb111-576"><a href="#cb111-576"></a>Or we can use (-maxtemp) to select all columns except maxtemp</span>
<span id="cb111-579"><a href="#cb111-579"></a><span class="in">```{r}</span></span>
<span id="cb111-580"><a href="#cb111-580"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-581"><a href="#cb111-581"></a>  <span class="fu">select</span>(<span class="sc">-</span>maxtemp) <span class="sc">|&gt;</span></span>
<span id="cb111-582"><a href="#cb111-582"></a>  <span class="fu">head</span>()</span>
<span id="cb111-583"><a href="#cb111-583"></a><span class="in">```</span></span>
<span id="cb111-584"><a href="#cb111-584"></a></span>
<span id="cb111-585"><a href="#cb111-585"></a>**mutate:**</span>
<span id="cb111-586"><a href="#cb111-586"></a></span>
<span id="cb111-587"><a href="#cb111-587"></a>We can use mutate(double_maxtemp = maxtemp * 2) to create a new column</span>
<span id="cb111-590"><a href="#cb111-590"></a><span class="in">```{r}</span></span>
<span id="cb111-591"><a href="#cb111-591"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-592"><a href="#cb111-592"></a>  <span class="fu">mutate</span>(<span class="at">double_maxtemp =</span> maxtemp <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-593"><a href="#cb111-593"></a>  <span class="fu">select</span>(maxtemp, mintemp) <span class="sc">|&gt;</span></span>
<span id="cb111-594"><a href="#cb111-594"></a>  <span class="fu">head</span>()</span>
<span id="cb111-595"><a href="#cb111-595"></a><span class="in">```</span></span>
<span id="cb111-596"><a href="#cb111-596"></a></span>
<span id="cb111-597"><a href="#cb111-597"></a>**summarize:**</span>
<span id="cb111-598"><a href="#cb111-598"></a></span>
<span id="cb111-599"><a href="#cb111-599"></a>We can use summarize(mean_mintemp = mean(mintemp)) to summarize the mintemp column as a mean</span>
<span id="cb111-602"><a href="#cb111-602"></a><span class="in">```{r}</span></span>
<span id="cb111-603"><a href="#cb111-603"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-604"><a href="#cb111-604"></a>  <span class="fu">summarize</span>(<span class="at">mean_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-605"><a href="#cb111-605"></a>  <span class="fu">head</span>()</span>
<span id="cb111-606"><a href="#cb111-606"></a><span class="in">```</span></span>
<span id="cb111-607"><a href="#cb111-607"></a></span>
<span id="cb111-608"><a href="#cb111-608"></a>**group_by:**</span>
<span id="cb111-609"><a href="#cb111-609"></a></span>
<span id="cb111-610"><a href="#cb111-610"></a>We can use group_by(location) to make the unit of observation location, and then use a function like summarize(avg_mintemp = mean(mintemp))</span>
<span id="cb111-613"><a href="#cb111-613"></a><span class="in">```{r}</span></span>
<span id="cb111-614"><a href="#cb111-614"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-615"><a href="#cb111-615"></a>  <span class="fu">group_by</span>(location) <span class="sc">|&gt;</span></span>
<span id="cb111-616"><a href="#cb111-616"></a>  <span class="fu">summarize</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-617"><a href="#cb111-617"></a>  <span class="fu">head</span>()</span>
<span id="cb111-618"><a href="#cb111-618"></a><span class="in">```</span></span>
<span id="cb111-619"><a href="#cb111-619"></a></span>
<span id="cb111-620"><a href="#cb111-620"></a>**ungroup:**</span>
<span id="cb111-621"><a href="#cb111-621"></a></span>
<span id="cb111-622"><a href="#cb111-622"></a>You can reverse the unit of observation you select in group_by by using ungroup by, but only if you didn't use summarize. In this example, we use group_by(location), then mutate(avg_mintemp = mean(mintemp)), then ungroup()</span>
<span id="cb111-625"><a href="#cb111-625"></a><span class="in">```{r}</span></span>
<span id="cb111-626"><a href="#cb111-626"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-627"><a href="#cb111-627"></a>  <span class="fu">group_by</span>(location) <span class="sc">|&gt;</span></span>
<span id="cb111-628"><a href="#cb111-628"></a>  <span class="fu">mutate</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-629"><a href="#cb111-629"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb111-630"><a href="#cb111-630"></a>  <span class="fu">head</span>()</span>
<span id="cb111-631"><a href="#cb111-631"></a><span class="in">```</span></span>
<span id="cb111-632"><a href="#cb111-632"></a></span>
<span id="cb111-633"><a href="#cb111-633"></a>**count:**</span>
<span id="cb111-634"><a href="#cb111-634"></a></span>
<span id="cb111-635"><a href="#cb111-635"></a>We have dataset hikes</span>
<span id="cb111-638"><a href="#cb111-638"></a><span class="in">```{r}</span></span>
<span id="cb111-639"><a href="#cb111-639"></a><span class="fu">head</span>(hikes)</span>
<span id="cb111-640"><a href="#cb111-640"></a><span class="in">```</span></span>
<span id="cb111-641"><a href="#cb111-641"></a></span>
<span id="cb111-642"><a href="#cb111-642"></a>We can use count(rating) to count the number of observations in the location column for each value</span>
<span id="cb111-645"><a href="#cb111-645"></a><span class="in">```{r}</span></span>
<span id="cb111-646"><a href="#cb111-646"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb111-647"><a href="#cb111-647"></a>  <span class="fu">count</span>(rating) <span class="sc">|&gt;</span></span>
<span id="cb111-648"><a href="#cb111-648"></a>  <span class="fu">head</span>()</span>
<span id="cb111-649"><a href="#cb111-649"></a><span class="in">```</span></span>
<span id="cb111-650"><a href="#cb111-650"></a>We can also use count() to count the total observations in the dataset</span>
<span id="cb111-653"><a href="#cb111-653"></a><span class="in">```{r}</span></span>
<span id="cb111-654"><a href="#cb111-654"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb111-655"><a href="#cb111-655"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb111-656"><a href="#cb111-656"></a>  <span class="fu">head</span>()</span>
<span id="cb111-657"><a href="#cb111-657"></a><span class="in">```</span></span>
<span id="cb111-658"><a href="#cb111-658"></a></span>
<span id="cb111-659"><a href="#cb111-659"></a>**n:**</span>
<span id="cb111-660"><a href="#cb111-660"></a></span>
<span id="cb111-661"><a href="#cb111-661"></a>We can use n() in a summarize function to count the number of observations in a group, similar to count</span>
<span id="cb111-664"><a href="#cb111-664"></a><span class="in">```{r}</span></span>
<span id="cb111-665"><a href="#cb111-665"></a>hikes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/high_peaks.csv"</span>)</span>
<span id="cb111-666"><a href="#cb111-666"></a></span>
<span id="cb111-667"><a href="#cb111-667"></a>hikes <span class="sc">|&gt;</span></span>
<span id="cb111-668"><a href="#cb111-668"></a>  <span class="fu">group_by</span>(rating) <span class="sc">|&gt;</span></span>
<span id="cb111-669"><a href="#cb111-669"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rating)) <span class="sc">|&gt;</span></span>
<span id="cb111-670"><a href="#cb111-670"></a>  <span class="fu">summarize</span>(<span class="at">total_trails =</span> <span class="fu">n</span>())</span>
<span id="cb111-671"><a href="#cb111-671"></a><span class="in">```</span></span>
<span id="cb111-672"><a href="#cb111-672"></a></span>
<span id="cb111-673"><a href="#cb111-673"></a>**na.rm:**</span>
<span id="cb111-674"><a href="#cb111-674"></a></span>
<span id="cb111-675"><a href="#cb111-675"></a>We can use na.rm = TRUE in a summarize function to remove all NA values in a column</span>
<span id="cb111-678"><a href="#cb111-678"></a><span class="in">```{r}</span></span>
<span id="cb111-679"><a href="#cb111-679"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-680"><a href="#cb111-680"></a>  <span class="fu">summarize</span>(<span class="at">avg_mintemp =</span> <span class="fu">mean</span>(mintemp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb111-681"><a href="#cb111-681"></a><span class="in">```</span></span>
<span id="cb111-682"><a href="#cb111-682"></a></span>
<span id="cb111-683"><a href="#cb111-683"></a>**as.factor:**</span>
<span id="cb111-684"><a href="#cb111-684"></a></span>
<span id="cb111-685"><a href="#cb111-685"></a>We can use as.factor(windgustdir) in a mutate function to make it a factor</span>
<span id="cb111-688"><a href="#cb111-688"></a><span class="in">```{r}</span></span>
<span id="cb111-689"><a href="#cb111-689"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-690"><a href="#cb111-690"></a>  <span class="fu">mutate</span>(<span class="at">windgustdir =</span> <span class="fu">as.factor</span>(windgustdir)) <span class="sc">|&gt;</span></span>
<span id="cb111-691"><a href="#cb111-691"></a>  <span class="fu">head</span>()</span>
<span id="cb111-692"><a href="#cb111-692"></a><span class="in">```</span></span>
<span id="cb111-693"><a href="#cb111-693"></a></span>
<span id="cb111-694"><a href="#cb111-694"></a>**as.numeric:**</span>
<span id="cb111-695"><a href="#cb111-695"></a></span>
<span id="cb111-696"><a href="#cb111-696"></a>We can use as.numeric(mintemp) in a mutate function to make mintemp a number (even though it was already a number)</span>
<span id="cb111-699"><a href="#cb111-699"></a><span class="in">```{r}</span></span>
<span id="cb111-700"><a href="#cb111-700"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-701"><a href="#cb111-701"></a>  <span class="fu">mutate</span>(<span class="at">mintemp =</span> <span class="fu">as.numeric</span>(mintemp)) <span class="sc">|&gt;</span></span>
<span id="cb111-702"><a href="#cb111-702"></a>  <span class="fu">head</span>()</span>
<span id="cb111-703"><a href="#cb111-703"></a><span class="in">```</span></span>
<span id="cb111-704"><a href="#cb111-704"></a></span>
<span id="cb111-705"><a href="#cb111-705"></a>**head():**</span>
<span id="cb111-706"><a href="#cb111-706"></a></span>
<span id="cb111-707"><a href="#cb111-707"></a>We can use head(weather) to check out the first few rows of the weather dataset</span>
<span id="cb111-710"><a href="#cb111-710"></a><span class="in">```{r}</span></span>
<span id="cb111-711"><a href="#cb111-711"></a><span class="fu">head</span>(weather)</span>
<span id="cb111-712"><a href="#cb111-712"></a><span class="in">```</span></span>
<span id="cb111-713"><a href="#cb111-713"></a></span>
<span id="cb111-714"><a href="#cb111-714"></a>**library():**</span>
<span id="cb111-715"><a href="#cb111-715"></a></span>
<span id="cb111-716"><a href="#cb111-716"></a>When you want to use a package that has been downloaded, use download(the package's name). For example:</span>
<span id="cb111-719"><a href="#cb111-719"></a><span class="in">```{r}</span></span>
<span id="cb111-720"><a href="#cb111-720"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb111-721"><a href="#cb111-721"></a><span class="in">```</span></span>
<span id="cb111-722"><a href="#cb111-722"></a></span>
<span id="cb111-723"><a href="#cb111-723"></a></span>
<span id="cb111-724"><a href="#cb111-724"></a><span class="fu">## Logical Operators:</span></span>
<span id="cb111-725"><a href="#cb111-725"></a></span>
<span id="cb111-726"><a href="#cb111-726"></a>| Operator             | Meaning                              |</span>
<span id="cb111-727"><a href="#cb111-727"></a>|----------------------|---------------------------------------|</span>
<span id="cb111-728"><a href="#cb111-728"></a>| <span class="in">`==`</span>                 | Equal to                              |</span>
<span id="cb111-729"><a href="#cb111-729"></a>| <span class="in">`!=`</span>                 | Not equal to                          |</span>
<span id="cb111-730"><a href="#cb111-730"></a>| <span class="in">`&gt;`</span>                  | Greater than                          |</span>
<span id="cb111-731"><a href="#cb111-731"></a>| <span class="in">`&gt;=`</span>                 | Greater than or equal to              |</span>
<span id="cb111-732"><a href="#cb111-732"></a>| <span class="in">`&lt;`</span>                  | Less than                             |</span>
<span id="cb111-733"><a href="#cb111-733"></a>| <span class="in">`&lt;=`</span>                 | Less than or equal to                 |</span>
<span id="cb111-734"><a href="#cb111-734"></a>| <span class="in">`%in% c(var1, var2)`</span> | Is equal to var1, var2, etc.          |</span>
<span id="cb111-735"><a href="#cb111-735"></a></span>
<span id="cb111-736"><a href="#cb111-736"></a>We can use logical operators to do various things. For example, in data manipulation, you can use it with a filter function like this:</span>
<span id="cb111-739"><a href="#cb111-739"></a><span class="in">```{r}</span></span>
<span id="cb111-740"><a href="#cb111-740"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-741"><a href="#cb111-741"></a>  <span class="fu">filter</span>(mintemp <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-742"><a href="#cb111-742"></a>  <span class="fu">head</span>()</span>
<span id="cb111-743"><a href="#cb111-743"></a><span class="in">```</span></span>
<span id="cb111-744"><a href="#cb111-744"></a></span>
<span id="cb111-745"><a href="#cb111-745"></a><span class="fu">## Selection Commands:</span></span>
<span id="cb111-746"><a href="#cb111-746"></a></span>
<span id="cb111-747"><a href="#cb111-747"></a>| Verb                   | Output                                                     |</span>
<span id="cb111-748"><a href="#cb111-748"></a>|------------------------|------------------------------------------------------------|</span>
<span id="cb111-749"><a href="#cb111-749"></a>| <span class="in">`starts_with("string")`</span> | Selects columns that start with the given string            |</span>
<span id="cb111-750"><a href="#cb111-750"></a>| <span class="in">`ends_with("string")`</span>   | Selects columns that end with the given string              |</span>
<span id="cb111-751"><a href="#cb111-751"></a>| <span class="in">`contains("string")`</span>    | Selects columns that contain the given string               |</span>
<span id="cb111-752"><a href="#cb111-752"></a>| <span class="in">`names(dataset1)`</span>       | Returns the names of all columns in the dataset             |</span>
<span id="cb111-753"><a href="#cb111-753"></a>| <span class="in">`is.na`</span>                 | Selects values that are <span class="in">`NA`</span>                                |</span>
<span id="cb111-754"><a href="#cb111-754"></a>| <span class="in">`!is.na`</span>                | Selects values that are **not** <span class="in">`NA`</span>                        |</span>
<span id="cb111-755"><a href="#cb111-755"></a>| <span class="in">`na.omit()`</span>             | Removes rows with any <span class="in">`NA`</span> values from the dataset          |</span>
<span id="cb111-756"><a href="#cb111-756"></a></span>
<span id="cb111-757"><a href="#cb111-757"></a>**starts_with():**</span>
<span id="cb111-758"><a href="#cb111-758"></a></span>
<span id="cb111-759"><a href="#cb111-759"></a>We can use starts_with("wind") in a select function to select columns that start with wind</span>
<span id="cb111-762"><a href="#cb111-762"></a><span class="in">```{r}</span></span>
<span id="cb111-763"><a href="#cb111-763"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-764"><a href="#cb111-764"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"wind"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-765"><a href="#cb111-765"></a>  <span class="fu">head</span>()</span>
<span id="cb111-766"><a href="#cb111-766"></a><span class="in">```</span></span>
<span id="cb111-767"><a href="#cb111-767"></a></span>
<span id="cb111-768"><a href="#cb111-768"></a>**ends_with():**</span>
<span id="cb111-769"><a href="#cb111-769"></a></span>
<span id="cb111-770"><a href="#cb111-770"></a>We can use ends_with("pm") in a select function to select columns of measurements taken in the second half of the day</span>
<span id="cb111-773"><a href="#cb111-773"></a><span class="in">```{r}</span></span>
<span id="cb111-774"><a href="#cb111-774"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-775"><a href="#cb111-775"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"pm"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-776"><a href="#cb111-776"></a>  <span class="fu">head</span>()</span>
<span id="cb111-777"><a href="#cb111-777"></a><span class="in">```</span></span>
<span id="cb111-778"><a href="#cb111-778"></a></span>
<span id="cb111-779"><a href="#cb111-779"></a>**contains():**</span>
<span id="cb111-780"><a href="#cb111-780"></a></span>
<span id="cb111-781"><a href="#cb111-781"></a>We can use contains("3") in a select function to select columns with measurements at 3 pm or am</span>
<span id="cb111-784"><a href="#cb111-784"></a><span class="in">```{r}</span></span>
<span id="cb111-785"><a href="#cb111-785"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-786"><a href="#cb111-786"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"3"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb111-787"><a href="#cb111-787"></a>  <span class="fu">head</span>()</span>
<span id="cb111-788"><a href="#cb111-788"></a><span class="in">```</span></span>
<span id="cb111-789"><a href="#cb111-789"></a></span>
<span id="cb111-790"><a href="#cb111-790"></a>**name:**</span>
<span id="cb111-791"><a href="#cb111-791"></a></span>
<span id="cb111-792"><a href="#cb111-792"></a>We can use names(weather) to get the names of each column in the weather dataset</span>
<span id="cb111-795"><a href="#cb111-795"></a><span class="in">```{r}</span></span>
<span id="cb111-796"><a href="#cb111-796"></a><span class="fu">names</span>(weather)</span>
<span id="cb111-797"><a href="#cb111-797"></a><span class="in">```</span></span>
<span id="cb111-798"><a href="#cb111-798"></a></span>
<span id="cb111-799"><a href="#cb111-799"></a>**is.na():**</span>
<span id="cb111-800"><a href="#cb111-800"></a></span>
<span id="cb111-801"><a href="#cb111-801"></a>We can use is.na(cloud9am) in a filter function to select observations which have NA values in the clouds9am column</span>
<span id="cb111-804"><a href="#cb111-804"></a><span class="in">```{r}</span></span>
<span id="cb111-805"><a href="#cb111-805"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-806"><a href="#cb111-806"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(cloud9am)) <span class="sc">|&gt;</span></span>
<span id="cb111-807"><a href="#cb111-807"></a>  <span class="fu">head</span>()</span>
<span id="cb111-808"><a href="#cb111-808"></a><span class="in">```</span></span>
<span id="cb111-809"><a href="#cb111-809"></a></span>
<span id="cb111-810"><a href="#cb111-810"></a>**!is.na():**</span>
<span id="cb111-811"><a href="#cb111-811"></a></span>
<span id="cb111-812"><a href="#cb111-812"></a>We can use !is.na(cloud9am) in a filter function to select observations which don't have NA values in the clouds9am column</span>
<span id="cb111-815"><a href="#cb111-815"></a><span class="in">```{r}</span></span>
<span id="cb111-816"><a href="#cb111-816"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-817"><a href="#cb111-817"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cloud9am)) <span class="sc">|&gt;</span></span>
<span id="cb111-818"><a href="#cb111-818"></a>  <span class="fu">head</span>()</span>
<span id="cb111-819"><a href="#cb111-819"></a><span class="in">```</span></span>
<span id="cb111-820"><a href="#cb111-820"></a></span>
<span id="cb111-821"><a href="#cb111-821"></a>**na.omit():**</span>
<span id="cb111-822"><a href="#cb111-822"></a></span>
<span id="cb111-823"><a href="#cb111-823"></a>We can use na.omit(weather) to remove all observations with NA values</span>
<span id="cb111-826"><a href="#cb111-826"></a><span class="in">```{r}</span></span>
<span id="cb111-827"><a href="#cb111-827"></a><span class="fu">na.omit</span>(weather) <span class="sc">|&gt;</span></span>
<span id="cb111-828"><a href="#cb111-828"></a>  <span class="fu">head</span>()</span>
<span id="cb111-829"><a href="#cb111-829"></a><span class="in">```</span></span>
<span id="cb111-830"><a href="#cb111-830"></a></span>
<span id="cb111-831"><a href="#cb111-831"></a><span class="fu">## Date Commands:</span></span>
<span id="cb111-832"><a href="#cb111-832"></a></span>
<span id="cb111-833"><a href="#cb111-833"></a>| Input                        | Output                                              |</span>
<span id="cb111-834"><a href="#cb111-834"></a>|-----------------------------|-----------------------------------------------------|</span>
<span id="cb111-835"><a href="#cb111-835"></a>| <span class="in">`as.Date(today())`</span>          | Returns todayâ€™s date                                |</span>
<span id="cb111-836"><a href="#cb111-836"></a>| <span class="in">`year(date)`</span>                | Returns the year from the date                      |</span>
<span id="cb111-837"><a href="#cb111-837"></a>| <span class="in">`month(date)`</span>               | Returns the month (1â€“12) from the date              |</span>
<span id="cb111-838"><a href="#cb111-838"></a>| <span class="in">`month(date, label = TRUE)`</span> | Returns the month as Jan, Feb, Mar, etc.            |</span>
<span id="cb111-839"><a href="#cb111-839"></a>| <span class="in">`week(date)`</span>                | Returns the week of the year from the date          |</span>
<span id="cb111-840"><a href="#cb111-840"></a>| <span class="in">`mday(date)`</span>                | Returns the day of the month from the date          |</span>
<span id="cb111-841"><a href="#cb111-841"></a>| <span class="in">`yday(date)`</span>                | Returns the day of the year from the date           |</span>
<span id="cb111-842"><a href="#cb111-842"></a>| <span class="in">`wday(date)`</span>                | Returns the day of the week (1 = Sunday by default) |</span>
<span id="cb111-843"><a href="#cb111-843"></a>| <span class="in">`wday(date, label = TRUE)`</span>  | Returns the day of the week as text (e.g. Mon, Tue) |</span>
<span id="cb111-844"><a href="#cb111-844"></a></span>
<span id="cb111-845"><a href="#cb111-845"></a>When you type date1 &gt; date2, you are typing a boolean expression that claims that date 1 occurred after date 2. Same goes for &gt;= and &lt;=</span>
<span id="cb111-846"><a href="#cb111-846"></a></span>
<span id="cb111-847"><a href="#cb111-847"></a>When filtering by dates, use â€œâ€ marks, or it wonâ€™t identify the numbers as a date, for example:</span>
<span id="cb111-850"><a href="#cb111-850"></a><span class="in">```{r}</span></span>
<span id="cb111-851"><a href="#cb111-851"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-852"><a href="#cb111-852"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="st">"2020-05-12"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-853"><a href="#cb111-853"></a>  <span class="fu">head</span>()</span>
<span id="cb111-854"><a href="#cb111-854"></a><span class="in">```</span></span>
<span id="cb111-855"><a href="#cb111-855"></a></span>
<span id="cb111-856"><a href="#cb111-856"></a><span class="fu">## Reshaping:</span></span>
<span id="cb111-857"><a href="#cb111-857"></a></span>
<span id="cb111-858"><a href="#cb111-858"></a>You can condense information (pivot longer) to combine information from multiple columns into one. You can also spread information from one column into multiple columns (pivot wider).</span>
<span id="cb111-859"><a href="#cb111-859"></a></span>
<span id="cb111-860"><a href="#cb111-860"></a>| Function                                                                                      | Result                                                                                                                              |</span>
<span id="cb111-861"><a href="#cb111-861"></a>|-----------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|</span>
<span id="cb111-862"><a href="#cb111-862"></a>| <span class="in">`pivot_wider(names_from = variable1, values_from = variable2)`</span>                                | Creates a new column for each unique value in <span class="in">`variable1`</span>; fills each with values from <span class="in">`variable2`</span>.                                |</span>
<span id="cb111-863"><a href="#cb111-863"></a>| <span class="in">`pivot_longer(cols = c(variable1, variable2, variable3), names_to = "variable4", values_to = "variable5")`</span> | Converts multiple columns into two: <span class="in">`variable4`</span> stores the original column names, <span class="in">`variable5`</span> holds their values.                  |</span>
<span id="cb111-864"><a href="#cb111-864"></a>| <span class="in">`pivot_longer(cols = -c(variable1, variable2, variable3), names_to = "variable4", values_to = "variable5")`</span> | Same as above, but pivots **all columns except** <span class="in">`variable1`</span>, <span class="in">`variable2`</span>, and <span class="in">`variable3`</span>.                                         |</span>
<span id="cb111-865"><a href="#cb111-865"></a></span>
<span id="cb111-866"><a href="#cb111-866"></a>To add a prefix to the name of every new column, use â€œnames_prefix = â€˜prefix1â€™â€ for pivot_wider at the end of the command. To remove the prefix of the column names in pivot wider, use â€œnames_prefix = â€˜prefix2â€™â€. Use it in between names_to and values_to, and it will remove the text (from left to right) in the columns that are combining.</span>
<span id="cb111-867"><a href="#cb111-867"></a></span>
<span id="cb111-868"><a href="#cb111-868"></a>**pivot_wider():**</span>
<span id="cb111-869"><a href="#cb111-869"></a></span>
<span id="cb111-870"><a href="#cb111-870"></a>We can use the pivot_wider() function to create columns for each row, and assign the value of the average maxtemp for each location depending on if it rained or not</span>
<span id="cb111-873"><a href="#cb111-873"></a><span class="in">```{r}</span></span>
<span id="cb111-874"><a href="#cb111-874"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-875"><a href="#cb111-875"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb111-876"><a href="#cb111-876"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(raintoday)) <span class="sc">|&gt;</span></span>
<span id="cb111-877"><a href="#cb111-877"></a>  <span class="fu">group_by</span>(raintoday, location) <span class="sc">|&gt;</span></span>
<span id="cb111-878"><a href="#cb111-878"></a>  <span class="fu">summarize</span>(<span class="at">mean_maxtemp =</span> <span class="fu">mean</span>(maxtemp)) <span class="sc">|&gt;</span></span>
<span id="cb111-879"><a href="#cb111-879"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> location, <span class="at">values_from =</span> mean_maxtemp, <span class="at">names_prefix =</span> <span class="st">"avg_maxtemp_"</span>)</span>
<span id="cb111-880"><a href="#cb111-880"></a><span class="in">```</span></span>
<span id="cb111-881"><a href="#cb111-881"></a></span>
<span id="cb111-882"><a href="#cb111-882"></a>**pivot_longer:**</span>
<span id="cb111-883"><a href="#cb111-883"></a></span>
<span id="cb111-884"><a href="#cb111-884"></a>We can use pivot_longer() to create a column for if the temperature measured in the min or max temp that day, and another column for the value of the mintemp or maxtemp</span>
<span id="cb111-887"><a href="#cb111-887"></a><span class="in">```{r}</span></span>
<span id="cb111-888"><a href="#cb111-888"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb111-889"><a href="#cb111-889"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(mintemp, maxtemp), <span class="at">names_to =</span> <span class="st">"temp"</span>, <span class="at">values_to =</span> <span class="st">"temperature"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-890"><a href="#cb111-890"></a>  <span class="fu">select</span>(date, location, temp, temperature) <span class="sc">|&gt;</span></span>
<span id="cb111-891"><a href="#cb111-891"></a>  <span class="fu">head</span>()</span>
<span id="cb111-892"><a href="#cb111-892"></a><span class="in">```</span></span>
<span id="cb111-893"><a href="#cb111-893"></a></span>
<span id="cb111-894"><a href="#cb111-894"></a><span class="fu">## Joining:</span></span>
<span id="cb111-895"><a href="#cb111-895"></a></span>
<span id="cb111-896"><a href="#cb111-896"></a>| Function                             | Result                                                                                      |</span>
<span id="cb111-897"><a href="#cb111-897"></a>|--------------------------------------|---------------------------------------------------------------------------------------------|</span>
<span id="cb111-898"><a href="#cb111-898"></a>| <span class="in">`dataset1 |&gt; left_join(dataset2)`</span>    | Adds matching data from <span class="in">`dataset2`</span> to <span class="in">`dataset1`</span>; keeps all rows from <span class="in">`dataset1`</span>.          |</span>
<span id="cb111-899"><a href="#cb111-899"></a>| <span class="in">`dataset1 |&gt; right_join(dataset2)`</span>   | Adds matching data from <span class="in">`dataset1`</span> to <span class="in">`dataset2`</span>; keeps all rows from <span class="in">`dataset2`</span>.          |</span>
<span id="cb111-900"><a href="#cb111-900"></a>| <span class="in">`dataset1 |&gt; inner_join(dataset2)`</span>   | Keeps only rows with matches in **both** datasets; removes rows with no match (no <span class="in">`NA`</span>s).  |</span>
<span id="cb111-901"><a href="#cb111-901"></a>| <span class="in">`dataset1 |&gt; full_join(dataset2)`</span>    | Combines all rows from both datasets; fills with <span class="in">`NA`</span> where there are no matches.          |</span>
<span id="cb111-902"><a href="#cb111-902"></a>| <span class="in">`dataset1 |&gt; anti_join(dataset2)`</span>    | Keeps rows from <span class="in">`dataset1`</span> **that do not match** anything in <span class="in">`dataset2`</span>.                   |</span>
<span id="cb111-903"><a href="#cb111-903"></a>| <span class="in">`dataset1 |&gt; semi_join(dataset2)`</span>    | Keeps rows from <span class="in">`dataset1`</span> **that have a match** in `dataset2`, but includes **only** columns from <span class="in">`dataset1`</span>. |</span>
<span id="cb111-904"><a href="#cb111-904"></a></span>
<span id="cb111-905"><a href="#cb111-905"></a></span>
<span id="cb111-906"><a href="#cb111-906"></a>Inside the join functions, you should specify join_by(commonon_column == common_column) to make sure the right observations are matched together</span>
<span id="cb111-907"><a href="#cb111-907"></a></span>
<span id="cb111-908"><a href="#cb111-908"></a>**left_join:**</span>
<span id="cb111-909"><a href="#cb111-909"></a></span>
<span id="cb111-910"><a href="#cb111-910"></a>We can insert how many students are enrolled in each class by inserting information from the courses_combined dataset into the grades dataset by using left_join()</span>
<span id="cb111-913"><a href="#cb111-913"></a><span class="in">```{r}</span></span>
<span id="cb111-914"><a href="#cb111-914"></a>grades <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/grades.csv"</span>)</span>
<span id="cb111-915"><a href="#cb111-915"></a></span>
<span id="cb111-916"><a href="#cb111-916"></a>courses <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/courses.csv"</span>)</span>
<span id="cb111-917"><a href="#cb111-917"></a></span>
<span id="cb111-918"><a href="#cb111-918"></a>courses_combined <span class="ot">&lt;-</span> courses <span class="sc">|&gt;</span></span>
<span id="cb111-919"><a href="#cb111-919"></a>  <span class="fu">group_by</span>(sessionID) <span class="sc">|&gt;</span></span>
<span id="cb111-920"><a href="#cb111-920"></a>  <span class="fu">summarise</span>(<span class="at">enroll =</span> <span class="fu">sum</span>(enroll))</span>
<span id="cb111-921"><a href="#cb111-921"></a></span>
<span id="cb111-922"><a href="#cb111-922"></a>grades <span class="sc">|&gt;</span></span>
<span id="cb111-923"><a href="#cb111-923"></a>  <span class="fu">left_join</span>(courses_combined, <span class="fu">join_by</span>(sessionID <span class="sc">==</span> sessionID)) <span class="sc">|&gt;</span></span>
<span id="cb111-924"><a href="#cb111-924"></a>  <span class="fu">head</span>()</span>
<span id="cb111-925"><a href="#cb111-925"></a><span class="in">```</span></span>
<span id="cb111-926"><a href="#cb111-926"></a></span>
<span id="cb111-927"><a href="#cb111-927"></a>**right_join:**</span>
<span id="cb111-928"><a href="#cb111-928"></a></span>
<span id="cb111-929"><a href="#cb111-929"></a>We can also add information about grades and student identification number to courses_combined by using right_join(). New observations(rows) will be created in courses_combined to accomodate the larger number of observations in grades</span>
<span id="cb111-932"><a href="#cb111-932"></a><span class="in">```{r}</span></span>
<span id="cb111-933"><a href="#cb111-933"></a>grades <span class="sc">|&gt;</span></span>
<span id="cb111-934"><a href="#cb111-934"></a>  <span class="fu">right_join</span>(courses_combined, <span class="fu">join_by</span>(sessionID <span class="sc">==</span> sessionID)) <span class="sc">|&gt;</span></span>
<span id="cb111-935"><a href="#cb111-935"></a>  <span class="fu">head</span>()</span>
<span id="cb111-936"><a href="#cb111-936"></a><span class="in">```</span></span>
<span id="cb111-937"><a href="#cb111-937"></a></span>
<span id="cb111-938"><a href="#cb111-938"></a>**full_join():**</span>
<span id="cb111-939"><a href="#cb111-939"></a></span>
<span id="cb111-940"><a href="#cb111-940"></a>We can use full_join() between the voters and contact datasets to combine as much information as we can about each observation. However, there will be NA values, meaning that some observations will be missing information for certain columns</span>
<span id="cb111-943"><a href="#cb111-943"></a><span class="in">```{r}</span></span>
<span id="cb111-944"><a href="#cb111-944"></a>voters <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb111-945"><a href="#cb111-945"></a>  <span class="at">id =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"F"</span>, <span class="st">"G"</span>),</span>
<span id="cb111-946"><a href="#cb111-946"></a>  <span class="at">times_voted =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">17</span>, <span class="dv">6</span>, <span class="dv">20</span>)</span>
<span id="cb111-947"><a href="#cb111-947"></a>)</span>
<span id="cb111-948"><a href="#cb111-948"></a>  </span>
<span id="cb111-949"><a href="#cb111-949"></a>contact <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb111-950"><a href="#cb111-950"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>),</span>
<span id="cb111-951"><a href="#cb111-951"></a>  <span class="at">address =</span> <span class="fu">c</span>(<span class="st">"summit"</span>, <span class="st">"grand"</span>, <span class="st">"snelling"</span>, <span class="st">"fairview"</span>),</span>
<span id="cb111-952"><a href="#cb111-952"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">89</span>, <span class="dv">43</span>, <span class="dv">38</span>)</span>
<span id="cb111-953"><a href="#cb111-953"></a>)</span>
<span id="cb111-954"><a href="#cb111-954"></a></span>
<span id="cb111-955"><a href="#cb111-955"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb111-956"><a href="#cb111-956"></a>  <span class="fu">full_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span>
<span id="cb111-957"><a href="#cb111-957"></a><span class="in">```</span></span>
<span id="cb111-958"><a href="#cb111-958"></a></span>
<span id="cb111-959"><a href="#cb111-959"></a>**inner_join():**</span>
<span id="cb111-960"><a href="#cb111-960"></a></span>
<span id="cb111-961"><a href="#cb111-961"></a>We can use inner_join() between the voters and contact datasets to combine only observations where the combined information will fill all fields, so that no NA values will be created</span>
<span id="cb111-964"><a href="#cb111-964"></a><span class="in">```{r}</span></span>
<span id="cb111-965"><a href="#cb111-965"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb111-966"><a href="#cb111-966"></a>  <span class="fu">inner_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span>
<span id="cb111-967"><a href="#cb111-967"></a><span class="in">```</span></span>
<span id="cb111-968"><a href="#cb111-968"></a></span>
<span id="cb111-969"><a href="#cb111-969"></a>**anti_join():**</span>
<span id="cb111-970"><a href="#cb111-970"></a></span>
<span id="cb111-971"><a href="#cb111-971"></a>We can use anti_join() to exclude all observations in voters that have a match in contact with no NA values</span>
<span id="cb111-974"><a href="#cb111-974"></a><span class="in">```{r}</span></span>
<span id="cb111-975"><a href="#cb111-975"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb111-976"><a href="#cb111-976"></a>  <span class="fu">anti_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span>
<span id="cb111-977"><a href="#cb111-977"></a><span class="in">```</span></span>
<span id="cb111-978"><a href="#cb111-978"></a></span>
<span id="cb111-979"><a href="#cb111-979"></a>**semi_join:**</span>
<span id="cb111-980"><a href="#cb111-980"></a></span>
<span id="cb111-981"><a href="#cb111-981"></a>We can use inner_join() between the voters and contact datasets to only show observations in voters where the match in contact has no NA values. This will also not add information to the dataset from contact.</span>
<span id="cb111-984"><a href="#cb111-984"></a><span class="in">```{r}</span></span>
<span id="cb111-985"><a href="#cb111-985"></a>voters <span class="sc">|&gt;</span></span>
<span id="cb111-986"><a href="#cb111-986"></a>  <span class="fu">semi_join</span>(contact, <span class="fu">join_by</span>(id <span class="sc">==</span> name))</span>
<span id="cb111-987"><a href="#cb111-987"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>