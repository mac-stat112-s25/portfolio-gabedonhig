<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Gabriel Donelly Higgins">
<title>7&nbsp; Exam 2 – COMP/STAT112 Notebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../bw/solo_project.html" rel="next">
<link href="../bw/exam_1.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../style/custom.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../bw/bw-uni.html">Best Work</a></li><li class="breadcrumb-item"><a href="../bw/exam_2.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exam 2</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Gabriel Donelly Higgins</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Best Work</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-tri.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Trivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-quad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Quadvariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/bw-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/exam_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/exam_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exam 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bw/solo_project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Solo Project</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Summary</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../summary/exam_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exam 1 Summary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../summary/exam_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exam 2 Summary</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">In-class Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-uni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Univariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-bi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Bivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Mulivariate Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Spatial Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-effective.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Effective Viz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Joining</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-reshaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reshaping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ica/ica-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Dates</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#research-question" id="toc-research-question" class="nav-link active" data-scroll-target="#research-question"><span class="header-section-number">7.1</span> Research question:</a></li>
  <li><a href="#import-necessary-data-and-tools" id="toc-import-necessary-data-and-tools" class="nav-link" data-scroll-target="#import-necessary-data-and-tools"><span class="header-section-number">7.2</span> Import Necessary Data and Tools:</a></li>
  <li><a href="#sub-research-question-1-which-5-countries-consume-the-most-food" id="toc-sub-research-question-1-which-5-countries-consume-the-most-food" class="nav-link" data-scroll-target="#sub-research-question-1-which-5-countries-consume-the-most-food"><span class="header-section-number">7.3</span> Sub-research Question 1: Which 5 countries consume the most food?</a></li>
  <li><a href="#sub-research-question-2-which-5-countries-consume-the-most-of-each-food" id="toc-sub-research-question-2-which-5-countries-consume-the-most-of-each-food" class="nav-link" data-scroll-target="#sub-research-question-2-which-5-countries-consume-the-most-of-each-food"><span class="header-section-number">7.4</span> Sub-research Question 2: Which 5 countries consume the most of each food?</a></li>
  <li><a href="#sub-research-question-1-what-does-the-consumption-of-each-food-look-like" id="toc-sub-research-question-1-what-does-the-consumption-of-each-food-look-like" class="nav-link" data-scroll-target="#sub-research-question-1-what-does-the-consumption-of-each-food-look-like"><span class="header-section-number">7.5</span> Sub-research Question 1: What does the consumption of each food look like?</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">7.6</span> Conclusion:</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../bw/bw-uni.html">Best Work</a></li><li class="breadcrumb-item"><a href="../bw/exam_2.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exam 2</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">
<span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exam 2</span>
</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriel Donelly Higgins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  


</header><ul>
<li>this is a continuation of exam one</li>
</ul>
<section id="research-question" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="research-question">
<span class="header-section-number">7.1</span> Research question:</h2>
<p><strong>What does the consumption of each food category in each country look like?</strong></p>
</section><section id="import-necessary-data-and-tools" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="import-necessary-data-and-tools">
<span class="header-section-number">7.2</span> Import Necessary Data and Tools:</h2>
<p><strong>Load in packages:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidytuesdayR)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(ggthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Load data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>tuesdata <span class="ot">&lt;-</span> <span class="fu">tt_load</span>(<span class="st">'2020-02-18'</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>fc <span class="ot">&lt;-</span> tuesdata<span class="sc">$</span>food_consumption</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Inspect Data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">str</span>(fc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [1,430 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ country      : chr [1:1430] "Argentina" "Argentina" "Argentina" "Argentina" ...
 $ food_category: chr [1:1430] "Pork" "Poultry" "Beef" "Lamb &amp; Goat" ...
 $ consumption  : num [1:1430] 10.51 38.66 55.48 1.56 4.36 ...
 $ co2_emmission: num [1:1430] 37.2 41.53 1712 54.63 6.96 ...
 - attr(*, "spec")=
  .. cols(
  ..   country = col_character(),
  ..   food_category = col_character(),
  ..   consumption = col_double(),
  ..   co2_emmission = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">head</span>(fc, <span class="dv">22</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 4
   country   food_category            consumption co2_emmission
   &lt;chr&gt;     &lt;chr&gt;                          &lt;dbl&gt;         &lt;dbl&gt;
 1 Argentina Pork                           10.5          37.2 
 2 Argentina Poultry                        38.7          41.5 
 3 Argentina Beef                           55.5        1712   
 4 Argentina Lamb &amp; Goat                     1.56         54.6 
 5 Argentina Fish                            4.36          6.96
 6 Argentina Eggs                           11.4          10.5 
 7 Argentina Milk - inc. cheese            195.          278.  
 8 Argentina Wheat and Wheat Products      103.           19.7 
 9 Argentina Rice                            8.77         11.2 
10 Argentina Soybeans                        0             0   
# ℹ 12 more rows</code></pre>
</div>
</div>
<p><strong>Inspect Country Variable:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(consumption)) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>tibble [130 × 2] (S3: tbl_df/tbl/data.frame)
 $ country         : chr [1:130] "Albania" "Algeria" "Angola" "Argentina" ...
 $ sum(consumption): num [1:130] 533 365 116 429 407 ...</code></pre>
</div>
</div>
<p>There are 130 observations, when you set the unit of observation to countries, so there are 130 countries in this dataset</p>
<p><strong>Inspect food_category variable:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">distinct</span>(food_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 1
   food_category           
   &lt;chr&gt;                   
 1 Pork                    
 2 Poultry                 
 3 Beef                    
 4 Lamb &amp; Goat             
 5 Fish                    
 6 Eggs                    
 7 Milk - inc. cheese      
 8 Wheat and Wheat Products
 9 Rice                    
10 Soybeans                
11 Nuts inc. Peanut Butter </code></pre>
</div>
</div>
<p>Here we have 11 distinct food categories, but it is better to rename them for the sake of making them easier to read in a viz</p>
<p><strong>Clean data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>fc_clean <span class="ot">&lt;-</span> fc <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">food_category =</span> <span class="fu">as.factor</span>(food_category),</span>
<span id="cb11-3"><a href="#cb11-3"></a>         <span class="at">food_category =</span> <span class="fu">fct_recode</span>(food_category,</span>
<span id="cb11-4"><a href="#cb11-4"></a>                                    <span class="st">"Lamb"</span> <span class="ot">=</span> <span class="st">"Lamb &amp; Goat"</span>,</span>
<span id="cb11-5"><a href="#cb11-5"></a>                                    <span class="st">"Dairy"</span> <span class="ot">=</span> <span class="st">"Milk - inc. cheese"</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>                                    <span class="st">"Wheat"</span> <span class="ot">=</span> <span class="st">"Wheat and Wheat Products"</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>                                    <span class="st">"Nuts"</span> <span class="ot">=</span> <span class="st">"Nuts inc. Peanut Butter"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Double checking to make sure all variables are properly renamed</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>fc_clean <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">distinct</span>(food_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 1
   food_category
   &lt;fct&gt;        
 1 Pork         
 2 Poultry      
 3 Beef         
 4 Lamb         
 5 Fish         
 6 Eggs         
 7 Dairy        
 8 Wheat        
 9 Rice         
10 Soybeans     
11 Nuts         </code></pre>
</div>
</div>
</section><section id="sub-research-question-1-which-5-countries-consume-the-most-food" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="sub-research-question-1-which-5-countries-consume-the-most-food">
<span class="header-section-number">7.3</span> Sub-research Question 1: Which 5 countries consume the most food?</h2>
<p><strong>Expected Dataframe:</strong> We want a dataframe in which countries are listed, followed by their total consumption</p>
<p><strong>Reshaping / Wrangling data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>country_consumption <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">summarize</span>(<span class="at">total_consumption =</span> <span class="fu">sum</span>(consumption))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Visualizing Data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>country_consumption <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_consumption)) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> total_consumption, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>    <span class="fu">theme_solarized</span>() <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="fu">scale_fill_solarized</span>() <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Consumption"</span>, <span class="at">title =</span> <span class="st">"World's Largest Consumers"</span>) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb15-10"><a href="#cb15-10"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb15-11"><a href="#cb15-11"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb15-12"><a href="#cb15-12"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="exam_2_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" alt="A bar graph is displayed. The title of the x-axis is  'Country' and the y axis is 'Total Consumption'. The y-axis goes from 0 to above 600. The x-axis lists the countries of Albania, Finland, Lithuania, Netherlands, and Sweden. Finland's bar is the tallest, above 600 on the y-axis, while the others float above 500. Each bar is colored differently." width="672"></p>
<figcaption>A Bar Graph of the World’s Largest Consumers</figcaption></figure>
</div>
</div>
</div>
<p><strong>Observations:</strong> Seemingly, the top consumers of food are exclusively European countries. Their geographic location varies from Eastern to Western, Baltics and Balkans and Scandinavian countries. They all consume roughly similar amounts of food, with Findland consuming the most.</p>
</section><section id="sub-research-question-2-which-5-countries-consume-the-most-of-each-food" class="level2" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="sub-research-question-2-which-5-countries-consume-the-most-of-each-food">
<span class="header-section-number">7.4</span> Sub-research Question 2: Which 5 countries consume the most of each food?</h2>
<p><strong>Expected Dataframe:</strong> We want a dataframe where there is a variable for countries, a variable for the food type, and a variable for the consumption value. The food_category should correspond to the top 5 highest values in the consumption variable for its category. And the countries in the country variable will be the top 5 consumers of whatever food category is in the food variable.</p>
<p><strong>Reshaping / Wrangling Data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>top_food_consumers <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>co2_emmission) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">group_by</span>(food_category) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> consumption, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Vizualizing Data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">ggplot</span>(top_food_consumers, <span class="fu">aes</span>(<span class="at">x =</span> food_category, <span class="at">y =</span> consumption, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">theme_solarized</span>() <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb17-5"><a href="#cb17-5"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb17-6"><a href="#cb17-6"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-7"><a href="#cb17-7"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>), </span>
<span id="cb17-8"><a href="#cb17-8"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-9"><a href="#cb17-9"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>)) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Country"</span>, <span class="at">x =</span> <span class="st">"Food Category"</span>, <span class="at">y =</span> <span class="st">"Consumption"</span>, <span class="at">title =</span> <span class="st">"Largest Consumers by Food Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="exam_2_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" alt="A bar graph with an x-axis label 'Food Category' and y-axis label 'Consumption' is displayed. The range goes above 1500 on the y-axis. 11 bars represent 11 food categories on the x-axis, which is labeled with each food category. The bars are colored, and a legend on the right is titled 'Country' and lists the colors and their corresponding country. The title of the plot is 'Largest Consumers by Food Category'. The bar with the highest consumption is dairy, whose consumers all color enough of the bar to make their consumption several times larger than that of the soybean bar. The second and third tallest bars are wheat and rice respectively, followed by fish, poultry, pork, and beef." width="960"></p>
<figcaption>A Bar Graph of Food Category and Consumption, Colored By The Top 5 Biggest Consumers</figcaption></figure>
</div>
</div>
</div>
<p><strong>Observations:</strong> Of all categories, dairy, wheat, and rice are the most consumed. The consumption of dairy, wheat, or rice is enough to outmatch the entire consumption of the top 5 countries combined in some categories like nuts or soybeans. What this means is that some of these categories are relatively easy to be a top 5 country in, because their consumption is very low anyway.</p>
</section><section id="sub-research-question-1-what-does-the-consumption-of-each-food-look-like" class="level2" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="sub-research-question-1-what-does-the-consumption-of-each-food-look-like">
<span class="header-section-number">7.5</span> Sub-research Question 1: What does the consumption of each food look like?</h2>
<p><strong>Expected Dataframe:</strong> We want a dataframe in which there is a country variable, a variable for food type, a corresponding variable for consumption, and a variable for the geometry of each country.</p>
<p><strong>Reshaping, Wrangling, and importing data:</strong></p>
<p>Find out which countries don’t have a match in the geometry dataset</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>fc_clean <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">anti_join</span>(<span class="fu">ne_countries</span>(), <span class="fu">join_by</span>(country <span class="sc">==</span> admin)) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">distinct</span>(country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 1
   country             
   &lt;chr&gt;               
 1 USA                 
 2 Bermuda             
 3 Hong Kong SAR. China
 4 French Polynesia    
 5 Bahamas             
 6 Malta               
 7 Barbados            
 8 Czech Republic      
 9 Maldives            
10 Serbia              
11 Swaziland           
12 Macedonia           
13 Mauritius           
14 Grenada             
15 Taiwan. ROC         
16 Tanzania            
17 Congo               </code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">st_set_geometry</span>(<span class="fu">ne_countries</span>(), <span class="cn">NULL</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">anti_join</span>(fc_clean, <span class="fu">join_by</span>(admin <span class="sc">==</span> country)) <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">distinct</span>(admin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>                                 admin
1          United Republic of Tanzania
2                       Western Sahara
3             United States of America
4                           Uzbekistan
5                     Papua New Guinea
6     Democratic Republic of the Congo
7                              Somalia
8                                Sudan
9                                 Chad
10                               Haiti
11                  Dominican Republic
12                         The Bahamas
13                    Falkland Islands
14                           Greenland
15 French Southern and Antarctic Lands
16                          East Timor
17                             Lesotho
18                              Guyana
19                            Suriname
20                         Puerto Rico
21                                Mali
22                          Mauritania
23                               Benin
24                         Ivory Coast
25                       Guinea-Bissau
26                        Burkina Faso
27            Central African Republic
28               Republic of the Congo
29                               Gabon
30                   Equatorial Guinea
31                            eSwatini
32                             Burundi
33                             Lebanon
34                           Palestine
35                               Qatar
36                                Iraq
37                             Vanuatu
38                                Laos
39                         North Korea
40                            Mongolia
41                              Bhutan
42                         Afghanistan
43                          Tajikistan
44                          Kyrgyzstan
45                        Turkmenistan
46                               Syria
47                             Moldova
48                     Solomon Islands
49                              Taiwan
50                          Azerbaijan
51                              Brunei
52                             Czechia
53                             Eritrea
54                               Yemen
55                          Antarctica
56                     Northern Cyprus
57                               Libya
58                            Djibouti
59                          Somaliland
60                     North Macedonia
61                  Republic of Serbia
62                          Montenegro
63                              Kosovo
64                         South Sudan</code></pre>
</div>
</div>
<p>Rename the countries so that they have a match and join the shapefile</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>temp <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>co2_emmission) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">group_by</span>(food_category) <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="fu">mutate</span>(<span class="at">consumption =</span> (consumption <span class="sc">-</span> <span class="fu">mean</span>(consumption)) <span class="sc">/</span> <span class="fu">sd</span>(consumption)) <span class="sc">|&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_recode</span>(country,</span>
<span id="cb22-6"><a href="#cb22-6"></a>                              <span class="st">"United States of America"</span> <span class="ot">=</span> <span class="st">"USA"</span>,</span>
<span id="cb22-7"><a href="#cb22-7"></a>                              <span class="st">"Czechia"</span> <span class="ot">=</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb22-8"><a href="#cb22-8"></a>                              <span class="st">"Republic of Serbia"</span> <span class="ot">=</span> <span class="st">"Serbia"</span>,</span>
<span id="cb22-9"><a href="#cb22-9"></a>                              <span class="st">"eSwatini"</span> <span class="ot">=</span> <span class="st">"Swaziland"</span>,</span>
<span id="cb22-10"><a href="#cb22-10"></a>                              <span class="st">"North Macedonia"</span> <span class="ot">=</span> <span class="st">"Macedonia"</span>,</span>
<span id="cb22-11"><a href="#cb22-11"></a>                              <span class="st">"Mauritania"</span> <span class="ot">=</span> <span class="st">"Mauritius"</span>,</span>
<span id="cb22-12"><a href="#cb22-12"></a>                              <span class="st">"United Republic of Tanzania"</span> <span class="ot">=</span> <span class="st">"Tanzania"</span>,</span>
<span id="cb22-13"><a href="#cb22-13"></a>                              <span class="st">"Democratic Republic of the Congo"</span> <span class="ot">=</span> <span class="st">"Congo"</span>,</span>
<span id="cb22-14"><a href="#cb22-14"></a>                              <span class="st">"United Republic of Tanzania"</span> <span class="ot">=</span> <span class="st">"Tanzania"</span>,</span>
<span id="cb22-15"><a href="#cb22-15"></a>                              <span class="st">"The Bahamas"</span> <span class="ot">=</span> <span class="st">"Bahamas"</span>,</span>
<span id="cb22-16"><a href="#cb22-16"></a>                              <span class="st">"Taiwan"</span> <span class="ot">=</span> <span class="st">"Taiwan. ROC"</span>))</span>
<span id="cb22-17"><a href="#cb22-17"></a></span>
<span id="cb22-18"><a href="#cb22-18"></a>temp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,430 × 3
# Groups:   food_category [11]
   country   food_category consumption
   &lt;fct&gt;     &lt;fct&gt;               &lt;dbl&gt;
 1 Argentina Pork               -0.357
 2 Argentina Poultry             1.20 
 3 Argentina Beef                4.49 
 4 Argentina Lamb               -0.284
 5 Argentina Fish               -0.680
 6 Argentina Eggs                0.641
 7 Argentina Dairy               0.743
 8 Argentina Wheat               0.714
 9 Argentina Rice               -0.552
10 Argentina Soybeans           -0.413
# ℹ 1,420 more rows</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>global_consumption <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>() <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">select</span>(admin, geometry) <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">left_join</span>(temp, <span class="fu">join_by</span>(admin <span class="sc">==</span> country)) <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">mutate</span>(<span class="at">consumption =</span> <span class="fu">replace_na</span>(consumption, <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> food_category, <span class="at">values_from =</span> consumption) <span class="sc">|&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">NA</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span>geometry, <span class="sc">-</span>admin), <span class="at">names_to =</span> <span class="st">"food_category"</span>, <span class="at">values_to =</span> <span class="st">"consumption"</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="fu">head</span>(global_consumption)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -18.28799 xmax: 180 ymax: -16.02088
Geodetic CRS:  WGS 84
# A tibble: 6 × 4
  admin                                       geometry food_category consumption
  &lt;chr&gt;                             &lt;MULTIPOLYGON [°]&gt; &lt;chr&gt;               &lt;dbl&gt;
1 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Pork              -0.752 
2 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Poultry           -0.0658
3 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Beef              -0.328 
4 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Lamb               0.900 
5 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Fish               0.932 
6 Fiji  (((180 -16.06713, 180 -16.55522, 179.3641 -16… Eggs              -0.343 </code></pre>
</div>
</div>
<p><strong>Vizualizing Data:</strong></p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> global_consumption,</span>
<span id="cb26-3"><a href="#cb26-3"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> consumption)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>food_category) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="st">"+proj=robin"</span>) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>  <span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Consumption of Food Categories Worldwide"</span>) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.77</span>, <span class="fl">0.02</span>), </span>
<span id="cb26-9"><a href="#cb26-9"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>), </span>
<span id="cb26-10"><a href="#cb26-10"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb26-11"><a href="#cb26-11"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.8</span>, <span class="st">"cm"</span>),</span>
<span id="cb26-12"><a href="#cb26-12"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"serif"</span>),</span>
<span id="cb26-13"><a href="#cb26-13"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">name =</span> <span class="st">"Consumption"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="exam_2_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" alt="Eleven world maps are shown, facet wrapped by food category. The categories are beef, dairy, eggs, fish, lamb, nuts, pork, poultry, rice, soybeans, and wheat. They are colored from dark to light blue, representing low to high consumption, as shown in a legend in the bottom right that goes from 0 to 6. Some countries have a grey fill, representing their lack of data. The title of the plot is 'Consumption of Food Categories Worldwide'. The countries with the highest beef consumption tend to be in the Americas. Those with the highest Dairy consumption tend to be in Europe and there is moderate consumption in the Americas. Egg consumption is moderate in North America, China, and Europe. Fish consumption is low worldwide, but moderate in Myanmar. Lamb consumption is high in a few countries like Kazakhstan, Algeria, and Australia. Nut consumption is high in select countries like the United States, Iran, China, and Bolivia. Pork consumption is high in China and Europe. Poultry consumption is high in the Americas. Rice consumption is high in East, Southeast, and South Asia. Soybean consumption is high in Botswana, Zimbabwe, and China. Wheat consumption is high in Algeria, Egypt, Russia, Iran, and Turkey." width="1440"></p>
<figcaption>Facet Wrapped World Maps of Consumption by Food Category</figcaption></figure>
</div>
</div>
</div>
<p><strong>Observations:</strong> Beef is heavily consumed in many highly countries like the United States, Russia, and Brazil, but also less consumed around most of the world and in other large countries like China, India, and Mexico. Dairy is heavily consumed in smaller countries like Finland and Kazakhstan, with moderate consumption around Europe and North America, and generally less consumption worldwide. Eggs are heavily consumed in China, with moderate consumption across Europe and the Americas. Fish has low consumption worldwide, but Myanmar stands out as a high consumer. Lamb is heavily consumed in Kazakhstan, Algeria, and Australia, while the rest of the world has considerably less consumption. The largest consumers of nuts are Persia, Canada and North America, and Bolivia. Additionally, countries with more moderate consumption include China, Australia, and Turkey. Pork is highly consumed in Russia, Europe and North America compared to the rest of the world. Poultry products tend to be more consumed in the Americas, Australia, and Saudi Arabia, with less worldwide consumption elsewhere. Rice is highly consumed in East, Southeast, and South Asia. Soybeans are highly consumed in China, Brazil, Botswana, and Zimbabwe. And lastly, Wheat is highly consumed in Algeria, Russia, Egypt, Turkey, and Iran. It is otherwise less consumed elsewhere.</p>
</section><section id="conclusion" class="level2" data-number="7.6"><h2 data-number="7.6" class="anchored" data-anchor-id="conclusion">
<span class="header-section-number">7.6</span> Conclusion:</h2>
<p>Most countries around the world have unique eating habits, but regional patterns to appear. For example, rice is heavily consumed in South, Southeast, and East Asia. The entirety of the Americas consumes very little lamb. Yet Kazakhstan, Australia, and Algeria (countries with large portions of lowly populated land) consume a lot of lamb. Similarly, beef is highly consumed in Brazil, the United States, and Australia. These countries all have lots of suitable land for cattle to graze. Dairy also seems to follow lactose tolerance, to an extent, with less consumption in much of Asia and Africa. However, throughout the Americas, where there are mixed and indigenous populations with higher rates of lactose intolerance, dairy still has a presence. Certain food categories tended to have a few outliers, like soybeans, may have had higher consumption in certain countries (like Botswana and Zimbabwe), but their worldwide consumption was so small that just the consumption of wheat among one of the top 5 wheat consumers was more than quadruple the consumption of all the top 5 soybean consumers combined. Surprisingly, the countries that had the highest total consumption were Albania, Finland, Lithuania, the Netherlands, and Sweden. These were all coastal European countries with less than one 100th of India’s population. I expected to see larger countries, like Brazil, Japan, India, China, Russia, or the United States to be top consumers. What this may indicate is that consumption is not calculated as the absolute consumption of food in these countries, but perhaps it is done in some other way. Considering that the top consumers were all coastal, perhaps calculations were based on food moving through the country, and these European countries had ports with high traffic. Or perhaps data wasn’t sufficiently collected in larger countries like India, China, or the United States.</p>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../bw/exam_1.html" class="pagination-link" aria-label="Exam 1">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exam 1</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../bw/solo_project.html" class="pagination-link" aria-label="Solo Project">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Solo Project</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb27" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">---</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="an">title:</span><span class="co"> "Exam 2"</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="an">author:</span><span class="co"> "Gabriel Donelly Higgins"</span></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="an">date:</span><span class="co"> "May 2nd, 2025"</span></span>
<span id="cb27-5"><a href="#cb27-5"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co">---</span></span>
<span id="cb27-7"><a href="#cb27-7"></a></span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="ss">* </span>this is a continuation of exam one</span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="fu">## Research question:</span></span>
<span id="cb27-11"><a href="#cb27-11"></a></span>
<span id="cb27-12"><a href="#cb27-12"></a>**What does the consumption of each food category in each country look like?**</span>
<span id="cb27-13"><a href="#cb27-13"></a></span>
<span id="cb27-14"><a href="#cb27-14"></a></span>
<span id="cb27-15"><a href="#cb27-15"></a><span class="fu">## Import Necessary Data and Tools:</span></span>
<span id="cb27-16"><a href="#cb27-16"></a></span>
<span id="cb27-17"><a href="#cb27-17"></a>**Load in packages:**</span>
<span id="cb27-20"><a href="#cb27-20"></a><span class="in">```{r}</span></span>
<span id="cb27-21"><a href="#cb27-21"></a><span class="fu">library</span>(tidytuesdayR)</span>
<span id="cb27-22"><a href="#cb27-22"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb27-23"><a href="#cb27-23"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb27-24"><a href="#cb27-24"></a><span class="fu">library</span>(sf)</span>
<span id="cb27-25"><a href="#cb27-25"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb27-26"><a href="#cb27-26"></a><span class="in">```</span></span>
<span id="cb27-27"><a href="#cb27-27"></a></span>
<span id="cb27-28"><a href="#cb27-28"></a></span>
<span id="cb27-29"><a href="#cb27-29"></a>**Load data:**</span>
<span id="cb27-32"><a href="#cb27-32"></a><span class="in">```{r}</span></span>
<span id="cb27-33"><a href="#cb27-33"></a>tuesdata <span class="ot">&lt;-</span> <span class="fu">tt_load</span>(<span class="st">'2020-02-18'</span>)</span>
<span id="cb27-34"><a href="#cb27-34"></a>fc <span class="ot">&lt;-</span> tuesdata<span class="sc">$</span>food_consumption</span>
<span id="cb27-35"><a href="#cb27-35"></a><span class="in">```</span></span>
<span id="cb27-36"><a href="#cb27-36"></a></span>
<span id="cb27-37"><a href="#cb27-37"></a></span>
<span id="cb27-38"><a href="#cb27-38"></a>**Inspect Data:**</span>
<span id="cb27-41"><a href="#cb27-41"></a><span class="in">```{r}</span></span>
<span id="cb27-42"><a href="#cb27-42"></a><span class="fu">str</span>(fc)</span>
<span id="cb27-43"><a href="#cb27-43"></a><span class="in">```</span></span>
<span id="cb27-44"><a href="#cb27-44"></a></span>
<span id="cb27-47"><a href="#cb27-47"></a><span class="in">```{r}</span></span>
<span id="cb27-48"><a href="#cb27-48"></a><span class="fu">head</span>(fc, <span class="dv">22</span>)</span>
<span id="cb27-49"><a href="#cb27-49"></a><span class="in">```</span></span>
<span id="cb27-50"><a href="#cb27-50"></a></span>
<span id="cb27-51"><a href="#cb27-51"></a></span>
<span id="cb27-52"><a href="#cb27-52"></a>**Inspect Country Variable:**</span>
<span id="cb27-55"><a href="#cb27-55"></a><span class="in">```{r}</span></span>
<span id="cb27-56"><a href="#cb27-56"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb27-57"><a href="#cb27-57"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb27-58"><a href="#cb27-58"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(consumption)) <span class="sc">|&gt;</span></span>
<span id="cb27-59"><a href="#cb27-59"></a>  <span class="fu">str</span>()</span>
<span id="cb27-60"><a href="#cb27-60"></a><span class="in">```</span></span>
<span id="cb27-61"><a href="#cb27-61"></a></span>
<span id="cb27-62"><a href="#cb27-62"></a>There are 130 observations, when you set the unit of observation to countries, so there are 130 countries in this dataset</span>
<span id="cb27-63"><a href="#cb27-63"></a></span>
<span id="cb27-64"><a href="#cb27-64"></a></span>
<span id="cb27-65"><a href="#cb27-65"></a>**Inspect food_category variable:**</span>
<span id="cb27-68"><a href="#cb27-68"></a><span class="in">```{r}</span></span>
<span id="cb27-69"><a href="#cb27-69"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb27-70"><a href="#cb27-70"></a>  <span class="fu">distinct</span>(food_category)</span>
<span id="cb27-71"><a href="#cb27-71"></a><span class="in">```</span></span>
<span id="cb27-72"><a href="#cb27-72"></a></span>
<span id="cb27-73"><a href="#cb27-73"></a>Here we have 11 distinct food categories, but it is better to rename them for the sake of making them easier to read in a viz</span>
<span id="cb27-74"><a href="#cb27-74"></a></span>
<span id="cb27-75"><a href="#cb27-75"></a>**Clean data:**</span>
<span id="cb27-78"><a href="#cb27-78"></a><span class="in">```{r}</span></span>
<span id="cb27-79"><a href="#cb27-79"></a>fc_clean <span class="ot">&lt;-</span> fc <span class="sc">|&gt;</span></span>
<span id="cb27-80"><a href="#cb27-80"></a>  <span class="fu">mutate</span>(<span class="at">food_category =</span> <span class="fu">as.factor</span>(food_category),</span>
<span id="cb27-81"><a href="#cb27-81"></a>         <span class="at">food_category =</span> <span class="fu">fct_recode</span>(food_category,</span>
<span id="cb27-82"><a href="#cb27-82"></a>                                    <span class="st">"Lamb"</span> <span class="ot">=</span> <span class="st">"Lamb &amp; Goat"</span>,</span>
<span id="cb27-83"><a href="#cb27-83"></a>                                    <span class="st">"Dairy"</span> <span class="ot">=</span> <span class="st">"Milk - inc. cheese"</span>,</span>
<span id="cb27-84"><a href="#cb27-84"></a>                                    <span class="st">"Wheat"</span> <span class="ot">=</span> <span class="st">"Wheat and Wheat Products"</span>,</span>
<span id="cb27-85"><a href="#cb27-85"></a>                                    <span class="st">"Nuts"</span> <span class="ot">=</span> <span class="st">"Nuts inc. Peanut Butter"</span>))</span>
<span id="cb27-86"><a href="#cb27-86"></a><span class="in">```</span></span>
<span id="cb27-87"><a href="#cb27-87"></a></span>
<span id="cb27-88"><a href="#cb27-88"></a>Double checking to make sure all variables are properly renamed</span>
<span id="cb27-91"><a href="#cb27-91"></a><span class="in">```{r}</span></span>
<span id="cb27-92"><a href="#cb27-92"></a>fc_clean <span class="sc">|&gt;</span></span>
<span id="cb27-93"><a href="#cb27-93"></a>  <span class="fu">distinct</span>(food_category)</span>
<span id="cb27-94"><a href="#cb27-94"></a><span class="in">```</span></span>
<span id="cb27-95"><a href="#cb27-95"></a></span>
<span id="cb27-96"><a href="#cb27-96"></a><span class="fu">## Sub-research Question 1: Which 5 countries consume the most food?</span></span>
<span id="cb27-97"><a href="#cb27-97"></a></span>
<span id="cb27-98"><a href="#cb27-98"></a>**Expected Dataframe:**</span>
<span id="cb27-99"><a href="#cb27-99"></a>We want a dataframe in which countries are listed, followed by their total consumption</span>
<span id="cb27-100"><a href="#cb27-100"></a></span>
<span id="cb27-101"><a href="#cb27-101"></a></span>
<span id="cb27-102"><a href="#cb27-102"></a>**Reshaping / Wrangling data:**</span>
<span id="cb27-105"><a href="#cb27-105"></a><span class="in">```{r}</span></span>
<span id="cb27-106"><a href="#cb27-106"></a>country_consumption <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb27-107"><a href="#cb27-107"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb27-108"><a href="#cb27-108"></a>  <span class="fu">summarize</span>(<span class="at">total_consumption =</span> <span class="fu">sum</span>(consumption))</span>
<span id="cb27-109"><a href="#cb27-109"></a><span class="in">```</span></span>
<span id="cb27-110"><a href="#cb27-110"></a></span>
<span id="cb27-111"><a href="#cb27-111"></a></span>
<span id="cb27-112"><a href="#cb27-112"></a>**Visualizing Data:**</span>
<span id="cb27-115"><a href="#cb27-115"></a><span class="in">```{r}</span></span>
<span id="cb27-116"><a href="#cb27-116"></a><span class="co">#| fig-cap: "A Bar Graph of the World's Largest Consumers"</span></span>
<span id="cb27-117"><a href="#cb27-117"></a><span class="co">#| fig-alt: "A bar graph is displayed. The title of the x-axis is  'Country' and the y axis is 'Total Consumption'. The y-axis goes from 0 to above 600. The x-axis lists the countries of Albania, Finland, Lithuania, Netherlands, and Sweden. Finland's bar is the tallest, above 600 on the y-axis, while the others float above 500. Each bar is colored differently."</span></span>
<span id="cb27-118"><a href="#cb27-118"></a>country_consumption <span class="sc">|&gt;</span></span>
<span id="cb27-119"><a href="#cb27-119"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_consumption)) <span class="sc">|&gt;</span></span>
<span id="cb27-120"><a href="#cb27-120"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-121"><a href="#cb27-121"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> total_consumption, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb27-122"><a href="#cb27-122"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb27-123"><a href="#cb27-123"></a>    <span class="fu">theme_solarized</span>() <span class="sc">+</span></span>
<span id="cb27-124"><a href="#cb27-124"></a>  <span class="fu">scale_fill_solarized</span>() <span class="sc">+</span></span>
<span id="cb27-125"><a href="#cb27-125"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">y =</span> <span class="st">"Total Consumption"</span>, <span class="at">title =</span> <span class="st">"World's Largest Consumers"</span>) <span class="sc">+</span></span>
<span id="cb27-126"><a href="#cb27-126"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb27-127"><a href="#cb27-127"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb27-128"><a href="#cb27-128"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb27-129"><a href="#cb27-129"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb27-130"><a href="#cb27-130"></a><span class="in">```</span></span>
<span id="cb27-131"><a href="#cb27-131"></a></span>
<span id="cb27-132"><a href="#cb27-132"></a></span>
<span id="cb27-133"><a href="#cb27-133"></a>**Observations:**</span>
<span id="cb27-134"><a href="#cb27-134"></a>Seemingly, the top consumers of food are exclusively European countries. Their geographic location varies from Eastern to Western, Baltics and Balkans and Scandinavian countries. They all consume roughly similar amounts of food, with Findland consuming the most.</span>
<span id="cb27-135"><a href="#cb27-135"></a></span>
<span id="cb27-136"><a href="#cb27-136"></a></span>
<span id="cb27-137"><a href="#cb27-137"></a><span class="fu">## Sub-research Question 2: Which 5 countries consume the most of each food?</span></span>
<span id="cb27-138"><a href="#cb27-138"></a></span>
<span id="cb27-139"><a href="#cb27-139"></a>**Expected Dataframe:**</span>
<span id="cb27-140"><a href="#cb27-140"></a>We want a dataframe where there is a variable for countries, a variable for the food type, and a variable for the consumption value. The food_category should correspond to the top 5 highest values in the consumption variable for its category. And the countries in the country variable will be the top 5 consumers of whatever food category is in the food variable.</span>
<span id="cb27-141"><a href="#cb27-141"></a></span>
<span id="cb27-142"><a href="#cb27-142"></a></span>
<span id="cb27-143"><a href="#cb27-143"></a>**Reshaping / Wrangling Data:**</span>
<span id="cb27-146"><a href="#cb27-146"></a><span class="in">```{r}</span></span>
<span id="cb27-147"><a href="#cb27-147"></a>top_food_consumers <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb27-148"><a href="#cb27-148"></a>  <span class="fu">select</span>(<span class="sc">-</span>co2_emmission) <span class="sc">|&gt;</span></span>
<span id="cb27-149"><a href="#cb27-149"></a>  <span class="fu">group_by</span>(food_category) <span class="sc">|&gt;</span></span>
<span id="cb27-150"><a href="#cb27-150"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> consumption, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb27-151"><a href="#cb27-151"></a><span class="in">```</span></span>
<span id="cb27-152"><a href="#cb27-152"></a></span>
<span id="cb27-153"><a href="#cb27-153"></a></span>
<span id="cb27-154"><a href="#cb27-154"></a>**Vizualizing Data:**</span>
<span id="cb27-157"><a href="#cb27-157"></a><span class="in">```{r}</span></span>
<span id="cb27-158"><a href="#cb27-158"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb27-159"><a href="#cb27-159"></a><span class="co">#| fig-width: 10</span></span>
<span id="cb27-160"><a href="#cb27-160"></a><span class="co">#| fig-cap: "A Bar Graph of Food Category and Consumption, Colored By The Top 5 Biggest Consumers"</span></span>
<span id="cb27-161"><a href="#cb27-161"></a><span class="co">#| fig-alt: "A bar graph with an x-axis label 'Food Category' and y-axis label 'Consumption' is displayed. The range goes above 1500 on the y-axis. 11 bars represent 11 food categories on the x-axis, which is labeled with each food category. The bars are colored, and a legend on the right is titled 'Country' and lists the colors and their corresponding country. The title of the plot is 'Largest Consumers by Food Category'. The bar with the highest consumption is dairy, whose consumers all color enough of the bar to make their consumption several times larger than that of the soybean bar. The second and third tallest bars are wheat and rice respectively, followed by fish, poultry, pork, and beef."</span></span>
<span id="cb27-162"><a href="#cb27-162"></a><span class="fu">ggplot</span>(top_food_consumers, <span class="fu">aes</span>(<span class="at">x =</span> food_category, <span class="at">y =</span> consumption, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb27-163"><a href="#cb27-163"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb27-164"><a href="#cb27-164"></a>  <span class="fu">theme_solarized</span>() <span class="sc">+</span></span>
<span id="cb27-165"><a href="#cb27-165"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb27-166"><a href="#cb27-166"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>),</span>
<span id="cb27-167"><a href="#cb27-167"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb27-168"><a href="#cb27-168"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"mono"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>), </span>
<span id="cb27-169"><a href="#cb27-169"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb27-170"><a href="#cb27-170"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#586e75"</span>)) <span class="sc">+</span></span>
<span id="cb27-171"><a href="#cb27-171"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Country"</span>, <span class="at">x =</span> <span class="st">"Food Category"</span>, <span class="at">y =</span> <span class="st">"Consumption"</span>, <span class="at">title =</span> <span class="st">"Largest Consumers by Food Category"</span>)</span>
<span id="cb27-172"><a href="#cb27-172"></a><span class="in">```</span></span>
<span id="cb27-173"><a href="#cb27-173"></a></span>
<span id="cb27-174"><a href="#cb27-174"></a></span>
<span id="cb27-175"><a href="#cb27-175"></a>**Observations:**</span>
<span id="cb27-176"><a href="#cb27-176"></a>Of all categories, dairy, wheat, and rice are the most consumed. The consumption of dairy, wheat, or rice is enough to outmatch the entire consumption of the top 5 countries combined in some categories like nuts or soybeans. What this means is that some of these categories are relatively easy to be a top 5 country in, because their consumption is very low anyway. </span>
<span id="cb27-177"><a href="#cb27-177"></a></span>
<span id="cb27-178"><a href="#cb27-178"></a></span>
<span id="cb27-179"><a href="#cb27-179"></a><span class="fu">## Sub-research Question 1: What does the consumption of each food look like?</span></span>
<span id="cb27-180"><a href="#cb27-180"></a></span>
<span id="cb27-181"><a href="#cb27-181"></a>**Expected Dataframe:**</span>
<span id="cb27-182"><a href="#cb27-182"></a>We want a dataframe in which there is a country variable, a variable for food type, a corresponding variable for consumption, and a variable for the geometry of each country.</span>
<span id="cb27-183"><a href="#cb27-183"></a></span>
<span id="cb27-184"><a href="#cb27-184"></a></span>
<span id="cb27-185"><a href="#cb27-185"></a>**Reshaping, Wrangling, and importing data:**</span>
<span id="cb27-186"><a href="#cb27-186"></a></span>
<span id="cb27-187"><a href="#cb27-187"></a>Find out which countries don't have a match in the geometry dataset</span>
<span id="cb27-190"><a href="#cb27-190"></a><span class="in">```{r}</span></span>
<span id="cb27-191"><a href="#cb27-191"></a>fc_clean <span class="sc">|&gt;</span></span>
<span id="cb27-192"><a href="#cb27-192"></a>  <span class="fu">anti_join</span>(<span class="fu">ne_countries</span>(), <span class="fu">join_by</span>(country <span class="sc">==</span> admin)) <span class="sc">|&gt;</span></span>
<span id="cb27-193"><a href="#cb27-193"></a>  <span class="fu">distinct</span>(country)</span>
<span id="cb27-194"><a href="#cb27-194"></a></span>
<span id="cb27-195"><a href="#cb27-195"></a><span class="fu">st_set_geometry</span>(<span class="fu">ne_countries</span>(), <span class="cn">NULL</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-196"><a href="#cb27-196"></a>  <span class="fu">anti_join</span>(fc_clean, <span class="fu">join_by</span>(admin <span class="sc">==</span> country)) <span class="sc">|&gt;</span></span>
<span id="cb27-197"><a href="#cb27-197"></a>  <span class="fu">distinct</span>(admin)</span>
<span id="cb27-198"><a href="#cb27-198"></a><span class="in">```</span></span>
<span id="cb27-199"><a href="#cb27-199"></a></span>
<span id="cb27-200"><a href="#cb27-200"></a></span>
<span id="cb27-201"><a href="#cb27-201"></a>Rename the countries so that they have a match and join the shapefile</span>
<span id="cb27-204"><a href="#cb27-204"></a><span class="in">```{r}</span></span>
<span id="cb27-205"><a href="#cb27-205"></a>temp <span class="ot">&lt;-</span> fc_clean <span class="sc">|&gt;</span></span>
<span id="cb27-206"><a href="#cb27-206"></a>  <span class="fu">select</span>(<span class="sc">-</span>co2_emmission) <span class="sc">|&gt;</span></span>
<span id="cb27-207"><a href="#cb27-207"></a>  <span class="fu">group_by</span>(food_category) <span class="sc">|&gt;</span></span>
<span id="cb27-208"><a href="#cb27-208"></a>  <span class="fu">mutate</span>(<span class="at">consumption =</span> (consumption <span class="sc">-</span> <span class="fu">mean</span>(consumption)) <span class="sc">/</span> <span class="fu">sd</span>(consumption)) <span class="sc">|&gt;</span></span>
<span id="cb27-209"><a href="#cb27-209"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_recode</span>(country,</span>
<span id="cb27-210"><a href="#cb27-210"></a>                              <span class="st">"United States of America"</span> <span class="ot">=</span> <span class="st">"USA"</span>,</span>
<span id="cb27-211"><a href="#cb27-211"></a>                              <span class="st">"Czechia"</span> <span class="ot">=</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb27-212"><a href="#cb27-212"></a>                              <span class="st">"Republic of Serbia"</span> <span class="ot">=</span> <span class="st">"Serbia"</span>,</span>
<span id="cb27-213"><a href="#cb27-213"></a>                              <span class="st">"eSwatini"</span> <span class="ot">=</span> <span class="st">"Swaziland"</span>,</span>
<span id="cb27-214"><a href="#cb27-214"></a>                              <span class="st">"North Macedonia"</span> <span class="ot">=</span> <span class="st">"Macedonia"</span>,</span>
<span id="cb27-215"><a href="#cb27-215"></a>                              <span class="st">"Mauritania"</span> <span class="ot">=</span> <span class="st">"Mauritius"</span>,</span>
<span id="cb27-216"><a href="#cb27-216"></a>                              <span class="st">"United Republic of Tanzania"</span> <span class="ot">=</span> <span class="st">"Tanzania"</span>,</span>
<span id="cb27-217"><a href="#cb27-217"></a>                              <span class="st">"Democratic Republic of the Congo"</span> <span class="ot">=</span> <span class="st">"Congo"</span>,</span>
<span id="cb27-218"><a href="#cb27-218"></a>                              <span class="st">"United Republic of Tanzania"</span> <span class="ot">=</span> <span class="st">"Tanzania"</span>,</span>
<span id="cb27-219"><a href="#cb27-219"></a>                              <span class="st">"The Bahamas"</span> <span class="ot">=</span> <span class="st">"Bahamas"</span>,</span>
<span id="cb27-220"><a href="#cb27-220"></a>                              <span class="st">"Taiwan"</span> <span class="ot">=</span> <span class="st">"Taiwan. ROC"</span>))</span>
<span id="cb27-221"><a href="#cb27-221"></a></span>
<span id="cb27-222"><a href="#cb27-222"></a>temp</span>
<span id="cb27-223"><a href="#cb27-223"></a></span>
<span id="cb27-224"><a href="#cb27-224"></a>global_consumption <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>() <span class="sc">|&gt;</span></span>
<span id="cb27-225"><a href="#cb27-225"></a>  <span class="fu">select</span>(admin, geometry) <span class="sc">|&gt;</span></span>
<span id="cb27-226"><a href="#cb27-226"></a>  <span class="fu">left_join</span>(temp, <span class="fu">join_by</span>(admin <span class="sc">==</span> country)) <span class="sc">|&gt;</span></span>
<span id="cb27-227"><a href="#cb27-227"></a>  <span class="fu">mutate</span>(<span class="at">consumption =</span> <span class="fu">replace_na</span>(consumption, <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb27-228"><a href="#cb27-228"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> food_category, <span class="at">values_from =</span> consumption) <span class="sc">|&gt;</span></span>
<span id="cb27-229"><a href="#cb27-229"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">NA</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-230"><a href="#cb27-230"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span>geometry, <span class="sc">-</span>admin), <span class="at">names_to =</span> <span class="st">"food_category"</span>, <span class="at">values_to =</span> <span class="st">"consumption"</span>)</span>
<span id="cb27-231"><a href="#cb27-231"></a></span>
<span id="cb27-232"><a href="#cb27-232"></a><span class="fu">head</span>(global_consumption)</span>
<span id="cb27-233"><a href="#cb27-233"></a><span class="in">```</span></span>
<span id="cb27-234"><a href="#cb27-234"></a></span>
<span id="cb27-235"><a href="#cb27-235"></a></span>
<span id="cb27-236"><a href="#cb27-236"></a>**Vizualizing Data:**</span>
<span id="cb27-239"><a href="#cb27-239"></a><span class="in">```{r}</span></span>
<span id="cb27-240"><a href="#cb27-240"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb27-241"><a href="#cb27-241"></a><span class="co">#| fig-width: 15</span></span>
<span id="cb27-242"><a href="#cb27-242"></a><span class="co">#| fig-cap: "Facet Wrapped World Maps of Consumption by Food Category"</span></span>
<span id="cb27-243"><a href="#cb27-243"></a><span class="co">#| fig-alt: "Eleven world maps are shown, facet wrapped by food category. The categories are beef, dairy, eggs, fish, lamb, nuts, pork, poultry, rice, soybeans, and wheat. They are colored from dark to light blue, representing low to high consumption, as shown in a legend in the bottom right that goes from 0 to 6. Some countries have a grey fill, representing their lack of data. The title of the plot is 'Consumption of Food Categories Worldwide'. The countries with the highest beef consumption tend to be in the Americas. Those with the highest Dairy consumption tend to be in Europe and there is moderate consumption in the Americas. Egg consumption is moderate in North America, China, and Europe. Fish consumption is low worldwide, but moderate in Myanmar. Lamb consumption is high in a few countries like Kazakhstan, Algeria, and Australia. Nut consumption is high in select countries like the United States, Iran, China, and Bolivia. Pork consumption is high in China and Europe. Poultry consumption is high in the Americas. Rice consumption is high in East, Southeast, and South Asia. Soybean consumption is high in Botswana, Zimbabwe, and China. Wheat consumption is high in Algeria, Egypt, Russia, Iran, and Turkey."</span></span>
<span id="cb27-244"><a href="#cb27-244"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb27-245"><a href="#cb27-245"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> global_consumption,</span>
<span id="cb27-246"><a href="#cb27-246"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> consumption)) <span class="sc">+</span></span>
<span id="cb27-247"><a href="#cb27-247"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>food_category) <span class="sc">+</span></span>
<span id="cb27-248"><a href="#cb27-248"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="st">"+proj=robin"</span>) <span class="sc">+</span></span>
<span id="cb27-249"><a href="#cb27-249"></a>  <span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb27-250"><a href="#cb27-250"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Consumption of Food Categories Worldwide"</span>) <span class="sc">+</span></span>
<span id="cb27-251"><a href="#cb27-251"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.77</span>, <span class="fl">0.02</span>), </span>
<span id="cb27-252"><a href="#cb27-252"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>), </span>
<span id="cb27-253"><a href="#cb27-253"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb27-254"><a href="#cb27-254"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.8</span>, <span class="st">"cm"</span>),</span>
<span id="cb27-255"><a href="#cb27-255"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"serif"</span>),</span>
<span id="cb27-256"><a href="#cb27-256"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb27-257"><a href="#cb27-257"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">name =</span> <span class="st">"Consumption"</span>)</span>
<span id="cb27-258"><a href="#cb27-258"></a><span class="in">```</span></span>
<span id="cb27-259"><a href="#cb27-259"></a></span>
<span id="cb27-260"><a href="#cb27-260"></a>**Observations:**</span>
<span id="cb27-261"><a href="#cb27-261"></a>Beef is heavily consumed in many highly countries like the United States, Russia, and Brazil, but also less consumed around most of the world and in other large countries like China, India, and Mexico. Dairy is heavily consumed in smaller countries like Finland and Kazakhstan, with moderate consumption around Europe and North America, and generally less consumption worldwide. Eggs are heavily consumed in China, with moderate consumption across Europe and the Americas. Fish has low consumption worldwide, but Myanmar stands out as a high consumer. Lamb is heavily consumed in Kazakhstan, Algeria, and Australia, while the rest of the world has considerably less consumption. The largest consumers of nuts are Persia, Canada and North America, and Bolivia. Additionally, countries with more moderate consumption include China, Australia, and Turkey. Pork is highly consumed in Russia, Europe and North America compared to the rest of the world. Poultry products tend to be more consumed in the Americas, Australia, and Saudi Arabia, with less worldwide consumption elsewhere. Rice is highly consumed in East, Southeast, and South Asia. Soybeans are highly consumed in China, Brazil, Botswana, and Zimbabwe. And lastly, Wheat is highly consumed in Algeria, Russia, Egypt, Turkey, and Iran. It is otherwise less consumed elsewhere.</span>
<span id="cb27-262"><a href="#cb27-262"></a></span>
<span id="cb27-263"><a href="#cb27-263"></a></span>
<span id="cb27-264"><a href="#cb27-264"></a><span class="fu">## Conclusion:</span></span>
<span id="cb27-265"><a href="#cb27-265"></a></span>
<span id="cb27-266"><a href="#cb27-266"></a>Most countries around the world have unique eating habits, but regional patterns to appear. For example, rice is heavily consumed in South, Southeast, and East Asia. The entirety of the Americas consumes very little lamb. Yet Kazakhstan, Australia, and Algeria (countries with large portions of lowly populated land) consume a lot of lamb. Similarly, beef is highly consumed in Brazil, the United States, and Australia. These countries all have lots of suitable land for cattle to graze. Dairy also seems to follow lactose tolerance, to an extent, with less consumption in much of Asia and Africa. However, throughout the Americas, where there are mixed and indigenous populations with higher rates of lactose intolerance, dairy still has a presence. Certain food categories tended to have a few outliers, like soybeans, may have had higher consumption in certain countries (like Botswana and Zimbabwe), but their worldwide consumption was so small that just the consumption of wheat among one of the top 5 wheat consumers was more than quadruple the consumption of all the top 5 soybean consumers combined. Surprisingly, the countries that had the highest total consumption were Albania, Finland, Lithuania, the Netherlands, and Sweden. These were all coastal European countries with less than one 100th of India's population. I expected to see larger countries, like Brazil, Japan, India, China, Russia, or the United States to be top consumers. What this may indicate is that consumption is not calculated as the absolute consumption of food in these countries, but perhaps it is done in some other way. Considering that the top consumers were all coastal, perhaps calculations were based on food moving through the country, and these European countries had ports with high traffic. Or perhaps data wasn't sufficiently collected in larger countries like India, China, or the United States. </span>
<span id="cb27-267"><a href="#cb27-267"></a></span>
<span id="cb27-268"><a href="#cb27-268"></a></span>
<span id="cb27-269"><a href="#cb27-269"></a></span>
<span id="cb27-270"><a href="#cb27-270"></a></span>
<span id="cb27-271"><a href="#cb27-271"></a></span>
<span id="cb27-272"><a href="#cb27-272"></a></span>
<span id="cb27-273"><a href="#cb27-273"></a></span>
<span id="cb27-274"><a href="#cb27-274"></a></span>
<span id="cb27-275"><a href="#cb27-275"></a></span>
<span id="cb27-276"><a href="#cb27-276"></a></span>
<span id="cb27-277"><a href="#cb27-277"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>